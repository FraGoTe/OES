/*

 FullCalendar v1.5.1
 http://arshaw.com/fullcalendar/

 Use fullcalendar.css for basic styling.
 For event drag & drop, requires jQuery UI draggable.
 For event resizing, requires jQuery UI resizable.

 Copyright (c) 2011 Adam Shaw
 Dual licensed under the MIT and GPL licenses, located in
 MIT-LICENSE.txt and GPL-LICENSE.txt respectively.

 Date: Sat Apr 9 14:09:51 2011 -0700

*/
(function(a,c){function b(d){a.extend(!0,da,d)}function d(d,b,C){function mb(){d.addClass("fc");b.isRTL&&d.addClass("fc-rtl");b.theme&&d.addClass("ui-widget");E=a("<div class='fc-content' style='position:relative'/>").prependTo(d);K=new f(n,b);(L=K.render())&&d.prepend(L);k(b.defaultView);a(window).resize(va);0!==a("body")[0].offsetWidth||T();var c=a(".fc-view-"+b.defaultView,d).height();setTimeout(function(){a(".fc-view-search",d).css("height",c).hide()},200)}function T(){setTimeout(function(){!s.start&&
0!==a("body")[0].offsetWidth&&P()},0)}function k(b){if(!s||b!=s.name){z++;t();var d=s,c;d?((d.beforeHide||Za)(),Da(E,E.height()),d.element.hide()):Da(E,1);E.css("overflow","hidden");(s=Z[b])?s.element.show():s=Z[b]=new ea[b](c=V=a("<div class='fc-view fc-view-"+b+"' style='position:absolute'/>").appendTo(E),n);a("#b_search_cal").hasClass("ui-state-active")&&a("#b_search_cal").trigger("click");d&&K.deactivateButton(d.name);K.activateButton(b);P();E.css("overflow","");d&&Da(E,1);c||(s.afterShow||Za)();
z--}}function P(a){if(0!==u.offsetWidth){z++;t();$===c&&m();var f=!1;!s.start||a||A<s.start||A>=s.end?(s.render(A,a||0),q(!0),f=!0):s.sizeDirty?(s.clearEvents(),q(),f=!0):s.eventsDirty&&(s.clearEvents(),f=!0);s.sizeDirty=!1;s.eventsDirty=!1;a=f;!b.lazyFetching||r(s.visStart,s.visEnd)?j():a&&o();la=d.outerWidth();K.updateTitle(s.title);a=new Date;a>=s.start&&a<s.end?K.disableButton("today"):K.enableButton("today");z--;s.trigger("viewDisplay",u)}}function Ea(){fa();if(0!==u.offsetWidth)m(),q(),t(),
s.clearEvents(),s.renderEvents(G),s.sizeDirty=!1}function fa(){a.each(Z,function(a,b){b.sizeDirty=!0})}function m(){$=b.contentHeight?b.contentHeight:b.height?b.height-(L?L.height():0)-wa(E):Math.round(E.width()/Math.max(b.aspectRatio,0.5))}function q(a){z++;s.setHeight($,a);V&&(V.css("position","relative"),V=null);s.setWidth(E.width(),a);z--}function va(){if(!z)if(s.start){var a=++S;setTimeout(function(){if(a==S&&!z&&0!==u.offsetWidth&&la!=(la=d.outerWidth()))z++,Ea(),s.trigger("windowResize",u),
z--},200)}else T()}function j(){v(s.visStart,s.visEnd)}function o(a){l();if(0!==u.offsetWidth)s.clearEvents(),s.renderEvents(G,a),s.eventsDirty=!1}function l(){a.each(Z,function(a,b){b.eventsDirty=!0})}function t(){s&&s.unselect()}var n=this;n.options=b;n.render=function(a){E?(m(),fa(),l(),P(a)):mb()};n.destroy=function(){a(window).unbind("resize",va);K.destroy();E.remove();d.removeClass("fc fc-rtl ui-widget")};n.refetchEvents=j;n.reportEvents=function(a){G=a;o()};n.reportEventChange=function(a){o(a)};
n.rerenderEvents=o;n.changeView=k;n.select=function(a,b,d){s.select(a,b,d===c?!0:d)};n.unselect=t;n.prev=function(){P(-1)};n.next=function(){P(1)};n.prevYear=function(){g(A,-1);P()};n.nextYear=function(){g(A,1);P()};n.today=function(){A=new Date;P()};n.gotoDate=function(a,b,d){a instanceof Date?A=p(a):w(A,a,b,d);P()};n.incrementDate=function(a,b,d){a!==c&&g(A,a);b!==c&&i(A,b);d!==c&&h(A,d);P()};n.formatDate=function(a,d){return F(a,d,b)};n.formatDates=function(a,d,c){return ha(a,d,c,b)};n.getDate=
function(){return p(A)};n.getView=function(){return s};n.option=function(a,d){if(d===c)return b[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)b[a]=d,Ea()};n.trigger=function(a,d){if(b[a])return b[a].apply(d||u,Array.prototype.slice.call(arguments,2))};e.call(n,b,C);var r=n.isFetchNeeded,v=n.fetchEvents,u=d[0],K,L,E,s,Z={},la,$,V,S=0,z=0,A=new Date,G=[],O;w(A,b.year,b.month,b.date);b.droppable&&a(document).bind("dragstart",function(d,c){var f=d.target,B=a(f);if(!B.parents(".fc").length){var e=
b.dropAccept;if(a.isFunction(e)?e.call(f,B):B.is(e))O=f,s.dragStart(O,d,c)}}).bind("dragstop",function(a,d){O&&(s.dragStop(O,a,d),O=null)})}function f(d,b){function c(f){var C=a("<td class='fc-header-"+f+"'/>");(f=b.header[f])&&a.each(f.split(" "),function(c){0<c&&C.append("<span class='fc-header-space'/>");var f;a.each(this.split(","),function(c,g){if("title"==g)C.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(e+"-corner-right"),f=null;else{var h;d[g]?h=d[g]:ea[g]&&
(h=function(){k.removeClass(e+"-state-hover");d.changeView(g)});if(h){var p=b.theme?Ka(b.buttonIcons,g):null,i=Ka(b.buttonText,g),k=a("<span class='fc-button fc-button-"+g+" "+e+"-state-default'><span class='fc-button-inner'><span class='fc-button-content'>"+(p?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+p+"'/></span>":i)+"</span><span class='fc-button-effect'><span></span></span></span></span>");k&&(k.click(function(){k.hasClass(e+"-state-disabled")||h()}).mousedown(function(){k.not("."+
e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-down")}).mouseup(function(){k.removeClass(e+"-state-down")}).hover(function(){k.not("."+e+"-state-active").not("."+e+"-state-disabled").addClass(e+"-state-hover")},function(){k.removeClass(e+"-state-hover").removeClass(e+"-state-down")}).appendTo(C),f||k.addClass(e+"-corner-left"),f=k)}}});f&&f.addClass(e+"-corner-right")});return C}this.render=function(){e=b.theme?"ui":"fc";if(b.header)return f=a("<table class='fc-header' style='width:100%'/>").append(a("<tr/>").append(c("left")).append(c("center")).append(c("right")))};
this.destroy=function(){f.remove()};this.updateTitle=function(a){f.find("h2").html(a)};this.activateButton=function(a){f.find("span.fc-button-"+a).addClass(e+"-state-active")};this.deactivateButton=function(a){f.find("span.fc-button-"+a).removeClass(e+"-state-active")};this.disableButton=function(a){f.find("span.fc-button-"+a).addClass(e+"-state-disabled")};this.enableButton=function(a){f.find("span.fc-button-"+a).removeClass(e+"-state-disabled")};var f=a([]),e}function e(d,b){function f(a,d){e(a,
function(b){if(d==X){if(b){for(var c=0;c<b.length;c++)b[c].source=a,k(b[c]);u=u.concat(b)}r--;r||j(u)}})}function e(b,c){var f,C=U.sourceFetchers,g;for(f=0;f<C.length;f++){g=C[f](b,t,w,c);if(!0===g)return;if("object"==typeof g){e(g,c);return}}if(f=b.events)a.isFunction(f)?(h(),f(p(t),p(w),function(a){c(a);i()})):a.isArray(f)?c(f):c();else if(b.url){var lb=b.success,k=b.error,T=b.complete;f=a.extend({},b.data||{});C=xa(b.startParam,d.startParam);g=xa(b.endParam,d.endParam);C&&(f[C]=Math.round(+t/1E3));
g&&(f[g]=Math.round(+w/1E3));h();a.ajax(a.extend({},ob,b,{data:f,success:function(b){var b=b||[],d=Fa(lb,this,arguments);a.isArray(d)&&(b=d);c(b)},error:function(){Fa(k,this,arguments);c()},complete:function(){Fa(T,this,arguments);i()}}))}else c()}function g(b){a.isFunction(b)||a.isArray(b)?b={events:b}:"string"==typeof b&&(b={url:b});if("object"==typeof b){var d=b;if(d.className){if("string"==typeof d.className)d.className=d.className.split(/\s+/)}else d.className=[];for(var c=U.sourceNormalizers,
f=0;f<c.length;f++)c[f](d);l.push(b);return b}}function h(){v++||m("loading",null,!0)}function i(){--v||m("loading",null,!1)}function k(a){var b=a.source||{},f=xa(b.ignoreTimezone,d.ignoreTimezone);a._id=a._id||(a.id===c?"_fc"+pb++:a.id+"");if(a.date){if(!a.start)a.start=a.date;delete a.date}a._start=p(a.start=n(a.start,f));a.end=n(a.end,f);if(a.end&&a.end<=a.start)a.end=null;a._end=a.end?p(a.end):null;if(a.allDay===c)a.allDay=xa(b.allDayDefault,d.allDayDefault);if(a.className){if("string"==typeof a.className)a.className=
a.className.split(/\s+/)}else a.className=[]}function fa(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!t||a<t||b>w};this.fetchEvents=function(a,b){t=a;w=b;u=[];var d=++X,c=l.length;r=c;for(var B=0;B<c;B++)f(l[B],d)};this.addEventSource=function(a){if(a=g(a))r++,f(a,X)};this.removeEventSource=function(b){l=a.grep(l,function(a){return!(a&&b&&fa(a)==fa(b))});u=a.grep(u,function(a){return!(a.source&&b&&fa(a.source)==fa(b))});j(u)};this.updateEvent=function(a){var b,
d=u.length,c,f=q().defaultEventEnd,B=a.start-a._start,e=a.end?a.end-(a._end||f(a)):0;for(b=0;b<d;b++)if(c=u[b],c._id==a._id&&c!=a)c.start=new Date(+c.start+B),c.end=a.end?c.end?new Date(+c.end+e):new Date(+f(c)+e):null,c.title=a.title,c.url=a.url,c.allDay=a.allDay,c.className=a.className,c.editable=a.editable,c.color=a.color,c.backgroudColor=a.backgroudColor,c.borderColor=a.borderColor,c.textColor=a.textColor,k(c);k(a);j(u)};this.renderEvent=function(a,b){k(a);if(!a.source){if(b)o.events.push(a),
a.source=o;u.push(a)}j(u)};this.removeEvents=function(b){if(b){if(!a.isFunction(b))var d=b+"",b=function(a){return a._id==d};u=a.grep(u,b,!0);for(c=0;c<l.length;c++)if(a.isArray(l[c].events))l[c].events=a.grep(l[c].events,b,!0)}else{u=[];for(var c=0;c<l.length;c++)if(a.isArray(l[c].events))l[c].events=[]}j(u)};this.clientEvents=function(b){if(a.isFunction(b))return a.grep(u,b);return b?(b+="",a.grep(u,function(a){return a._id==b})):u};this.normalizeEvent=k;for(var m=this.trigger,q=this.getView,j=
this.reportEvents,o={events:[]},l=[o],t,w,X=0,r=0,v=0,u=[],K=0;K<b.length;K++)g(b[K])}function g(a,b,d){a.setFullYear(a.getFullYear()+b);d||l(a);return a}function i(a,b,d){if(+a){var b=a.getMonth()+b,c=p(a);c.setDate(1);c.setMonth(b);a.setMonth(b);for(d||l(a);a.getMonth()!=c.getMonth();)a.setDate(a.getDate()+(a<c?1:-1))}return a}function h(a,b,d){if(+a){var b=a.getDate()+b,c=p(a);c.setHours(9);c.setDate(b);a.setDate(b);d||l(a);j(a,c)}return a}function j(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+
(a<b?1:-1)*qb)}function k(a,b){a.setMinutes(a.getMinutes()+b);return a}function l(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function p(a,b){return b?l(new Date(+a)):new Date(+a)}function m(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function o(a,b,d){for(b=b||1;!a.getDay()||d&&1==a.getDay()||!d&&6==a.getDay();)h(a,b);return a}function t(a,b){return Math.round((p(a,!0)-p(b,!0))/$a)}function w(a,b,d,f){b!==c&&b!=a.getFullYear()&&(a.setDate(1),
a.setMonth(0),a.setFullYear(b));d!==c&&d!=a.getMonth()&&(a.setDate(1),a.setMonth(d));f!==c&&a.setDate(f)}function n(a,b){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));b===c&&(b=!0);return x(a,b)||(a?new Date(a):null)}return null}function x(a,b){var d=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);
if(!d)return null;var c=new Date(d[1],0,1);if(b||!d[13]){var f=new Date(d[1],0,1,9,0);d[3]&&(c.setMonth(d[3]-1),f.setMonth(d[3]-1));d[5]&&(c.setDate(d[5]),f.setDate(d[5]));j(c,f);d[7]&&c.setHours(d[7]);d[8]&&c.setMinutes(d[8]);d[10]&&c.setSeconds(d[10]);d[12]&&c.setMilliseconds(1E3*Number("0."+d[12]));j(c,f)}else c.setUTCFullYear(d[1],d[3]?d[3]-1:0,d[5]||1),c.setUTCHours(d[7]||0,d[8]||0,d[10]||0,d[12]?1E3*Number("0."+d[12]):0),d[14]&&(f=60*Number(d[16])+(d[18]?Number(d[18]):0),f*="-"==d[15]?1:-1,
c=new Date(+c+6E4*f));return c}function D(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function F(a,b,d){return ha(a,null,b,d)}function ha(a,b,d,c){var c=c||da,f=a,e=b,g,h=d.length,p,i,k,l="";for(g=0;g<h;g++)if(p=d.charAt(g),"'"==p)for(i=g+1;i<h;i++){if("'"==d.charAt(i)){f&&(l=i==g+1?
l+"'":l+d.substring(g+1,i),g=i);break}}else if("("==p)for(i=g+1;i<h;i++){if(")"==d.charAt(i)){g=F(f,d.substring(g+1,i),c);parseInt(g.replace(/\D/,""),10)&&(l+=g);g=i;break}}else if("["==p)for(i=g+1;i<h;i++){if("]"==d.charAt(i)){p=d.substring(g+1,i);g=F(f,p,c);g!=F(e,p,c)&&(l+=g);g=i;break}}else if("{"==p)f=b,e=a;else if("}"==p)f=a,e=b;else{for(i=h;i>g;i--)if(k=rb[d.substring(g,i)]){f&&(l+=k(f,c));g=i-1;break}i==g&&f&&(l+=p)}return l}function N(a){var b;a.end?(b=a.end,a=a.allDay,b=p(b),b=a||b.getHours()||
b.getMinutes()?h(b,1):l(b)):b=h(p(a.start),1);return b}function W(a,b){return 100*(b.msLength-a.msLength)+(a.event.start-b.event.start)}function ya(a,b,d,c){var f=[],e,g=a.length,h,i,k,l,j;for(e=0;e<g;e++)h=a[e],i=h.start,k=b[e],k>d&&i<c&&(i<d?(i=p(d),l=!1):l=!0,k>c?(k=p(c),j=!1):j=!0,f.push({event:h,start:i,end:k,isStart:l,isEnd:j,msLength:k-i}));return f.sort(W)}function Y(a){var b=[],d,c=a.length,f,e,g,h;for(d=0;d<c;d++){f=a[d];for(e=0;;){g=!1;if(b[e])for(h=0;h<b[e].length;h++)if(b[e][h].end>f.start&&
b[e][h].start<f.end){g=!0;break}if(g)e++;else break}b[e]?b[e].push(f):b[e]=[f]}return b}function za(b,d,f){b.unbind("mouseover").mouseover(function(b){for(var e=b.target,g;e!=this;)g=e,e=e.parentNode;if((e=g._fci)!==c)g._fci=c,g=d[e],f(g.event,g.element,g),a(b.target).trigger(b);b.stopPropagation()})}function Aa(b,d,c){for(var f=0,e;f<b.length;f++)e=a(b[f]),e.width(Math.max(0,d-(La(e)+Ma(e)+(c?Na(e):0))))}function ab(b,d,c){for(var f=0,e;f<b.length;f++)e=a(b[f]),e.height(Math.max(0,d-wa(e,c)))}function La(b){return(parseFloat(a.curCSS(b[0],
"paddingLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingRight",!0))||0)}function Na(b){return(parseFloat(a.curCSS(b[0],"marginLeft",!0))||0)+(parseFloat(a.curCSS(b[0],"marginRight",!0))||0)}function Ma(b){return(parseFloat(a.curCSS(b[0],"borderLeftWidth",!0))||0)+(parseFloat(a.curCSS(b[0],"borderRightWidth",!0))||0)}function wa(b,d){return(parseFloat(a.curCSS(b[0],"paddingTop",!0))||0)+(parseFloat(a.curCSS(b[0],"paddingBottom",!0))||0)+((parseFloat(a.curCSS(b[0],"borderTopWidth",!0))||0)+(parseFloat(a.curCSS(b[0],
"borderBottomWidth",!0))||0))+(d?bb(b):0)}function bb(b){return(parseFloat(a.curCSS(b[0],"marginTop",!0))||0)+(parseFloat(a.curCSS(b[0],"marginBottom",!0))||0)}function Da(a,b){b="number"==typeof b?b+"px":b;a.each(function(a,d){d.style.cssText+=";min-height:"+b+";_height:"+b})}function Za(){}function cb(a,b){return a-b}function ja(a){return(10>a?"0":"")+a}function Ka(a,b){if(a[b]!==c)return a[b];for(var d=b.split(/(?=[A-Z])/),f=d.length-1,e;0<=f;f--)if(e=a[d[f].toLowerCase()],e!==c)return e;return a[""]}
function ra(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function db(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,"")}function Ga(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Ha(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function Oa(a,b){a.each(function(a,d){d.className=d.className.replace(/^fc-\w*/,"fc-"+sb[b.getDay()])})}function eb(a,b){var d=a.source||{},c=a.color,f=d.color,e=b("eventColor"),g=a.backgroundColor||c||d.backgroundColor||f||b("eventBackgroundColor")||e,c=a.borderColor||c||d.borderColor||f||b("eventBorderColor")||e,d=a.textColor||d.textColor||b("eventTextColor"),f=[];g&&f.push("background-color:"+g);c&&f.push("border-color:"+c);d&&f.push("color:"+d);return f.join(";")}function Fa(b,d,c){a.isFunction(b)&&
(b=[b]);if(b){var f,e;for(f=0;f<b.length;f++)e=b[f].apply(d,c)||e;return e}}function xa(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==c)return arguments[a]}function tb(b,d,c){function f(){var b=l(new Date),d;E.each(function(c,f){if(!q.curYear)q.curYear=q.start;var e=p(q.start);e.setFullYear(e.getFullYear(),c,1);e.setFullYear(e.getFullYear(),c,1-e.getDay());a(f).find("td").each(function(f,g){var p;d=a(g);e.getMonth()==c?(d.removeClass("fc-other-month"),p=r(e,"-yyyy-MM-dd")):(d.addClass("fc-other-month"),
p=" ui-state-disabled");+e==+b&&e.getMonth()==c?d.addClass(J+"-state-highlight fc-today"):d.removeClass(J+"-state-highlight fc-today");var i=d.find("div.fc-day-number");i.text(e.getDate());i.parent().parent().addClass(J+"-widget-content fc-day"+p);h(e,1)})});L.filter(".fc-year-have-event").removeClass("fc-year-have-event ui-state-default")}function e(a){if(o("selectable")){var b=this.className.search("fc-day-");-1!=b&&(b=this.className.substring(b+7,b+7+10),b=b.split("-"),b=new Date(b[0],parseInt(b[1])-
1,b[2],0,0,0),n("reportDayClick",this,b,!0,a))}}function g(a,b,d){d&&A.build();for(var d=p(q.visStart),c=h(p(d),z),f=0;f<S;f++){var k=new Date(Math.max(d,a)),C=new Date(Math.min(c,b));if(k<C){var l;M?(l=t(C,d)*Q+R+1,k=t(k,d)*Q+R+1):(l=t(k,d),k=t(C,d));i(f,l,f,k-1).click(e).mousedown(X)}h(d,7);h(c,7)}}function i(a,d,c,f){a=A.rect(a,d,c,f,b);return ga(a,b)}function k(a){return{row:Math.floor(t(a,q.visStart)/7),col:m(a.getDay())}}function j(a){return h(p(q.visStart),7*a.row+a.col*Q+R)}function m(a){return(a-
Math.max(H,y)+z)%z*Q+R}var q=this;q.renderYear=function(d,c,g,i){S=c;z=g;(M=o("isRTL"))?(Q=-1,R=z-1):(Q=1,R=0);H=o("firstDay");y=o("weekends")?0:1;J=o("theme")?"ui":"fc";colFormat=o("columnFormat");if(d=!v){for(var g=J+"-widget-header",k=J+"-widget-content",C,l,j,m=p(q.start),fa=da.dayNamesShortest,Ea=da.monthNames,c="<table class='fc-border-separate fc-year-main-table' style='width:100%'><tr >",s=0;12>s;s++){m.setFullYear(m.getFullYear(),s,1);m.setFullYear(m.getFullYear(),s,1-m.getDay());0==s%3&&
0<s&&(c+="</tr><tr>");c+="<td class='fc-year-monthly-td ui-widget'>";c+="<table class='ui-widget' style='width:100%' cellspacing='0'><thead><tr><th colspan='7' class='fc-year-monthly-header "+g+"' style='height:18px'>"+Ea[s]+"</th></tr><tr>";for(C=0;C<z;C++)c+="<th class='fc-year-month-weekly-head'>"+fa[C]+"</th>";c+="</tr></thead><tbody>";for(C=0;6>C;C++){c+="<tr class='ui-widget-content fc-week"+C+"'>";for(l=0;l<z;l++)j=m.getMonth()==s?r(m,"-yyyy-MM-dd"):"",c+="<td style='height:32px' class='fc- "+
k+" fc-day"+j+"'><div>"+(i?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'></div></div></td>",h(m,1);c+="</tr>"}c+="</tbody></table>";c+="</td>"}v=a(c+"</tr></table>").appendTo(b);u=v.find("thead");K=u.find("th");E=v.find("table");L=v.find("table tr td");L.click(e).mousedown(X);Z=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else w();f(d)};q.setHeight=function(a){$=a;a=$-u.height();v.parent().height(a).css("overflow-y","auto")};q.setWidth=function(){};q.renderDayOverlay=
g;q.defaultSelectionEnd=function(a){return p(a)};q.renderSelection=function(a,b){g(a,h(p(b),1),!0)};q.clearSelection=function(){x()};q.reportDayClick=function(a,b,d){var c=k(a);n("dayClick",s[c.row*z+c.col],a,b,d)};q.dragStart=function(a,b){G.start(function(a){x();a&&i(a.row,a.col,a.row,a.col)},b)};q.dragStop=function(a,b,d){var c=G.stop();x();c&&(c=j(c),n("drop",a,c,!0,b,d))};q.defaultEventEnd=function(a){return p(a.start)};q.getHoverListener=function(){return G};q.colContentLeft=function(a){return O.left(a)};
q.colContentRight=function(a){return O.right(a)};q.dayOfWeekCol=m;q.dateCell=k;q.cellDate=j;q.cellIsAllDay=function(){return!0};q.allDayRow=function(a){return L.eq(a)};q.allDayBounds=function(){return{left:0,right:la}};q.getRowCnt=function(){return S};q.getColCnt=function(){return z};q.getColWidth=function(){return V};q.getBodyRows=function(){return L};q.getDaySegmentContainer=function(){return Z};Pa.call(q,b,d,c);Qa.call(q);Ra.call(q);ub.call(q);var o=q.opt,n=q.trigger,w=q.clearEvents,ga=q.renderOverlay,
x=q.clearOverlays,X=q.daySelectionMousedown,r=d.formatDate,v,u,K,L,E,s,Z,la,$,V,S,z,A,G,O,M,Q,R,H,y,J;Ga(b.addClass("fc-grid"));A=new Sa(function(b,d){var c,f,e;K.each(function(b,g){c=a(g);f=c.offset().left;b&&(e[1]=f);e=[f];d[b]=e});e[1]=f+c.outerWidth();L.each(function(d,g){if(d<S)c=a(g),f=c.offset().top,d&&(e[1]=f),e=[f],b[d]=e});e[1]=f+c.outerHeight()});G=new Ta(A);O=new Ua(function(a){return bodyCellTopInners.eq(a)})}function ub(){function b(d){var f=p(c.visStart),e=p(c.visEnd),g,h,i=[];g=a.map(d,
N);h=[];var k,l=d.length,m,j,B,o,q;for(k=0;k<l;k++)m=d[k],j=m.start,B=g[k],B>f&&j<e&&(j<f?(j=p(f),o=!1):o=!0,B>e?(B=p(e),q=!1):q=!0,h.push({event:m,start:j,end:B,isStart:o,isEnd:q,msLength:B-j}));f=h.sort(W);d=[];g=f.length;for(e=0;e<g;e++){h=f[e];for(k=0;;){l=!1;if(d[k])for(m=0;m<d[k].length;m++)if(d[k][m].end>h.start&&d[k][m].start<h.end){l=!0;break}if(l)k++;else break}d[k]?d[k].push(h):d[k]=[h]}for(f=0;f<d.length;f++){e=d[f];for(g=0;g<e.length;g++)h=e[g],h.row=void 0,h.level=f,i.push(h)}return i}
function d(a,b){var c=w(),g;b.draggable({zIndex:9,delay:50,opacity:f("dragOpacity"),revertDuration:f("dragRevertDuration"),start:function(d,i){e("eventDragStart",b,a,d,i);o(a,b);c.start(function(d,c,e,i){b.draggable("option","revert",!d||!e&&!i);X();d?(g=7*e+i*(f("isRTL")?-1:1),x(h(p(a.start),g),h(N(a),g))):g=0},d,"drag")},stop:function(d,f){c.stop();X();e("eventDragStop",b,a,d,f);g?n(this,a,g,0,a.allDay,d,f):(b.css("filter",""),j(a,b))}})}var c=this;c.renderEvents=function(d){k(d);d=b(d);try{var c=
r();a("div.fc-day-content",c).html("");c.filter("td.fc-year-have-event").removeClass("fc-year-have-event ui-state-default");for(var f,e=0;e<d.length;e++)for(var g=p(d[e].start);g.getTime()<d[e].end.getTime();){f=c.filter(".fc-day-"+F(d[e].start,"yyyy-MM-dd"));f.addClass("fc-year-have-event ui-state-default");var i=a("div.fc-day-content",f).html();""!=a.trim(i)?a("div.fc-day-content",f).html(parseInt(i)+1):a("div.fc-day-content",f).html("1");h(g,1)}}catch(C){alert("MyrenderDaySegs:"+C)}};c.compileDaySegs=
b;c.clearEvents=function(){l();t().empty()};c.bindDaySeg=function(a,b,c){g(a)&&d(a,b);c.isEnd&&i(a)&&v(a,b,c);m(a,b)};Va.call(c);var f=c.opt,e=c.trigger,g=c.isEventDraggable,i=c.isEventResizable,k=c.reportEvents,l=c.reportEventClear,m=c.eventElementHandlers,j=c.showEvents,o=c.hideEvents,n=c.eventDrop,t=c.getDaySegmentContainer,w=c.getHoverListener,x=c.renderDayOverlay,X=c.clearOverlays,r=c.getBodyRows,v=c.resizableDayEvent}function Wa(b,d,c){function f(b){var d=b||1==A,c=n.start.getMonth(),e=l(new Date),
g,h,i;d&&K.each(function(b,d){g=a(d);h=j(b);g.html(v(h,aa));Oa(g,h)});s.each(function(b,f){g=a(f);h=j(b);h.getMonth()==c?g.removeClass("fc-other-month"):g.addClass("fc-other-month");+h==+e?g.addClass(I+"-state-highlight fc-today"):g.removeClass(I+"-state-highlight fc-today");g.find("div.fc-day-number").text(h.getDate());d&&Oa(g,h)});E.each(function(b,d){i=a(d);b<A?(i.show(),b==A-1?i.addClass("fc-last"):i.removeClass("fc-last")):i.hide()})}function e(a){if(!w("selectable")){var b=parseInt(this.className.match(/fc\-day(\d+)/)[1]),
b=j(b);x("dayClick",this,b,!0,a)}}function g(a,b,d){d&&O.build();for(var d=p(n.visStart),c=h(p(d),G),f=0;f<A;f++){var k=new Date(Math.max(d,a)),C=new Date(Math.min(c,b));if(k<C){var l;R?(l=t(C,d)*H+y+1,k=t(k,d)*H+y+1):(l=t(k,d),k=t(C,d));i(f,l,f,k-1).click(e).mousedown(r)}h(d,7);h(c,7)}}function i(a,d,c,f){a=O.rect(a,d,c,f,b);return D(a,b)}function k(a){return{row:Math.floor(t(a,n.visStart)/7),col:o(a.getDay())}}function m(a){return h(p(n.visStart),7*a.row+a.col*H+y)}function j(a){return h(p(n.visStart),
7*Math.floor(a/G)+a%G*H+y)}function o(a){return(a-Math.max(J,ka)+G)%G*H+y}var n=this;n.renderBasic=function(d,c,g,h){A=c;G=g;(R=w("isRTL"))?(H=-1,y=G-1):(H=1,y=0);J=w("firstDay");ka=w("weekends")?0:1;I=w("theme")?"ui":"fc";aa=w("columnFormat");if(c=!L){var i=I+"-widget-header",k=I+"-widget-content",p,g="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";for(p=0;p<G;p++)g+="<th class='fc- "+i+"'/>";g+="</tr></thead><tbody>";for(p=0;p<d;p++){g+="<tr class='fc-week"+p+
"'>";for(i=0;i<G;i++)g+="<td class='fc- "+k+" fc-day"+(p*G+i)+"'><div>"+(h?"<div class='fc-day-number'/>":"")+"<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";g+="</tr>"}d=a(g+"</tbody></table>").appendTo(b);u=d.find("thead");K=u.find("th");L=d.find("tbody");E=L.find("tr");s=L.find("td");Z=s.filter(":first-child");F=E.eq(0).find("div.fc-day-content div");Ha(u.add(u.find("tr")));Ha(E);E.eq(0).addClass("fc-first");s.click(e).mousedown(r);$=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(b)}else ga();
f(c)};n.setHeight=function(b){S=b;var b=S-u.height(),d,c,f;"variable"==w("weekMode")?d=c=Math.floor(b/(1==A?2:6)):(d=Math.floor(b/A),c=b-d*(A-1));Z.each(function(b,e){b<A&&(f=a(e),Da(f.find("> div"),(b==A-1?c:d)-wa(f)))})};n.setWidth=function(a){V=a;Q.clear();z=Math.floor(V/G);Aa(K.slice(0,-1),z)};n.renderDayOverlay=g;n.defaultSelectionEnd=function(a){return p(a)};n.renderSelection=function(a,b){g(a,h(p(b),1),!0)};n.clearSelection=function(){X()};n.reportDayClick=function(a,b,d){var c=k(a);x("dayClick",
s[c.row*G+c.col],a,b,d)};n.dragStart=function(a,b){M.start(function(a){X();a&&i(a.row,a.col,a.row,a.col)},b)};n.dragStop=function(a,b,d){var c=M.stop();X();c&&(c=m(c),x("drop",a,c,!0,b,d))};n.defaultEventEnd=function(a){return p(a.start)};n.getHoverListener=function(){return M};n.colContentLeft=function(a){return Q.left(a)};n.colContentRight=function(a){return Q.right(a)};n.dayOfWeekCol=o;n.dateCell=k;n.cellDate=m;n.cellIsAllDay=function(){return!0};n.allDayRow=function(a){return E.eq(a)};n.allDayBounds=
function(){return{left:0,right:V}};n.getRowCnt=function(){return A};n.getColCnt=function(){return G};n.getColWidth=function(){return z};n.getDaySegmentContainer=function(){return $};Pa.call(n,b,d,c);Qa.call(n);Ra.call(n);vb.call(n);var w=n.opt,x=n.trigger,ga=n.clearEvents,D=n.renderOverlay,X=n.clearOverlays,r=n.daySelectionMousedown,v=d.formatDate,u,K,L,E,s,Z,F,$,V,S,z,A,G,O,M,Q,R,H,y,J,ka,I,aa;Ga(b.addClass("fc-grid"));O=new Sa(function(b,d){var c,f,e;K.each(function(b,g){c=a(g);f=c.offset().left;
b&&(e[1]=f);e=[f];d[b]=e});e[1]=f+c.outerWidth();E.each(function(d,g){if(d<A)c=a(g),f=c.offset().top,d&&(e[1]=f),e=[f],b[d]=e});e[1]=f+c.outerHeight()});M=new Ta(O);Q=new Ua(function(a){return F.eq(a)})}function vb(){function b(d){var f=r(),e=v(),g=p(c.visStart),e=h(p(g),e),i=a.map(d,N),k,l,m,j,n,o,B=[];for(k=0;k<f;k++){l=Y(ya(d,i,g,e));for(m=0;m<l.length;m++){j=l[m];for(n=0;n<j.length;n++)o=j[n],o.row=k,o.level=m,B.push(o)}h(g,7);h(e,7)}return B}function d(a,b){var c=w(),g;b.draggable({zIndex:9,
delay:50,opacity:f("dragOpacity"),revertDuration:f("dragRevertDuration"),start:function(d,i){e("eventDragStart",b,a,d,i);n(a,b);c.start(function(d,c,e,i){b.draggable("option","revert",!d||!e&&!i);D();d?(g=7*e+i*(f("isRTL")?-1:1),x(h(p(a.start),g),h(N(a),g))):g=0},d,"drag")},stop:function(d,f){c.stop();D();e("eventDragStop",b,a,d,f);g?o(this,a,g,0,a.allDay,d,f):(b.css("filter",""),j(a,b))}})}var c=this;c.renderEvents=function(a,d){k(a);u(b(a),d)};c.compileDaySegs=b;c.clearEvents=function(){l();t().empty()};
c.bindDaySeg=function(a,b,c){g(a)&&d(a,b);c.isEnd&&i(a)&&K(a,b,c);m(a,b)};Va.call(c);var f=c.opt,e=c.trigger,g=c.isEventDraggable,i=c.isEventResizable,k=c.reportEvents,l=c.reportEventClear,m=c.eventElementHandlers,j=c.showEvents,n=c.hideEvents,o=c.eventDrop,t=c.getDaySegmentContainer,w=c.getHoverListener,x=c.renderDayOverlay,D=c.clearOverlays,r=c.getRowCnt,v=c.getColCnt,u=c.renderDaySegs,K=c.resizableDayEvent}function jb(b,d,f){function e(){function a(){I.scrollTop(c)}var b=m(),d=p(b);d.setHours(v("firstHour"));
var c=ca(b,d)+1;a();setTimeout(a,0)}function g(a){if(!v("selectable")){var b=Math.min(ba-1,Math.floor((a.pageX-S.offset().left-na)/Ia)),d=w(b),c=this.parentNode.className.match(/fc-slot(\d+)/);c?(c=parseInt(c[1])*v("slotMinutes"),d.setHours(Math.floor(c/60)),d.setMinutes(c%60+oa),u("dayClick",O[b],d,!1,a)):u("dayClick",O[b],d,!0,a)}}function i(a,b,d){d&&pa.build();var c=p(r.visStart);ea?(d=t(b,c)*W+Y+1,a=t(a,c)*W+Y+1):(d=t(a,c),a=t(b,c));d=Math.max(0,d);a=Math.min(ba,a);d<a&&j(0,d,0,a-1).click(g).mousedown(la)}
function j(a,b,d,c){a=pa.rect(a,b,d,c,H);return L(a,H)}function n(a,b){for(var d=p(r.visStart),c=h(p(d),1),f=0;f<ba;f++){var e=new Date(Math.max(d,a)),i=new Date(Math.min(c,b));if(e<i){var k=f*W+Y,k=pa.rect(0,k,0,k,aa),e=ca(d,e),i=ca(d,i);k.top=e;k.height=i-e;L(k,aa).click(g).mousedown(N)}h(d,1);h(c,1)}}function o(a){var b=w(a.col),a=a.row;v("allDaySlot")&&a--;0<=a&&k(b,oa+a*v("slotMinutes"));return b}function w(a){return h(p(r.visStart),a*W+Y)}function q(a){return v("allDaySlot")&&!a.row}function x(a){return(a-
Math.max(za,ha)+ba)%ba*W+Y}function ca(a,b){a=p(a,!0);if(b<k(p(a),oa))return 0;if(b>=k(p(a),da))return ma.height();var d=v("slotMinutes"),f=60*b.getHours()+b.getMinutes()-oa,e=Math.floor(f/d),g=U[e];if(g===c)g=U[e]=ma.find("tr:eq("+e+") td div")[0].offsetTop;return Math.max(0,Math.round(g-1+Ba*(f%d/d)))}function F(b,d){var c=v("selectHelper");pa.build();if(c){var f=t(b,r.visStart)*W+Y;if(0<=f&&f<ba){var f=pa.rect(0,f,0,f,aa),e=ca(b,b),h=ca(b,d);if(h>e){f.top=e;f.height=h-e;f.left+=2;f.width-=5;if(a.isFunction(c)){if(c=
c(b,d))f.position="absolute",f.zIndex=8,ia=a(c).css(f).appendTo(aa)}else f.isStart=!0,f.isEnd=!0,ia=a($({title:"",start:b,end:d,className:["fc-select-helper"],editable:!1},f)),ia.css("opacity",v("dragOpacity"));ia&&(ia.click(g).mousedown(N),aa.append(ia),Aa(ia,f.width,!0),ab(ia,f.height,!0))}}}else n(b,d)}function ga(){E();ia&&(ia.remove(),ia=null)}function N(b){if(1==b.which&&v("selectable")){Z(b);var d;ua.start(function(a,b){ga();if(a&&a.col==b.col&&!q(a)){var c=o(b),f=o(a);d=[c,k(p(c),v("slotMinutes")),
f,k(p(f),v("slotMinutes"))].sort(cb);F(d[0],d[3])}else d=null},b);a(document).one("mouseup",function(a){ua.stop();d&&(+d[0]==+d[1]&&X(d[0],!1,a),s(d[0],d[3],!1,a))})}}function X(a,b,d){u("dayClick",O[x(a.getDay())],a,b,d)}var r=this;r.renderAgenda=function(d){ba=d;Ca=v("theme")?"ui":"fc";ha=v("weekends")?0:1;za=v("firstDay");(ea=v("isRTL"))?(W=-1,Y=ba-1):(W=1,Y=0);oa=D(v("minTime"));da=D(v("maxTime"));ja=v("columnFormat");if(S)K();else{var d=Ca+"-widget-header",c=Ca+"-widget-content",f,e,h,i,j,n=
0==v("slotMinutes")%15;f="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr><th class='fc-agenda-axis "+d+"'>&nbsp;</th>";for(e=0;e<ba;e++)f+="<th class='fc- fc-col"+e+" "+d+"'/>";f+="<th class='fc-agenda-gutter "+d+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+d+"'>&nbsp;</th>";for(e=0;e<ba;e++)f+="<td class='fc- fc-col"+e+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";S=a(f+
("<td class='fc-agenda-gutter "+c+"'>&nbsp;</td></tr></tbody></table>")).appendTo(b);z=S.find("thead");A=z.find("th").slice(1,-1);G=S.find("tbody");O=G.find("td").slice(0,-1);M=O.find("div.fc-day-content div");Q=O.eq(0);R=Q.find("> div");Ha(z.add(z.find("tr")));Ha(G.add(G.find("tr")));sa=z.find("th:first");ta=S.find(".fc-agenda-gutter");H=a("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(b);v("allDaySlot")?(y=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(H),
f="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+d+" fc-agenda-axis'>"+v("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+d+" fc-agenda-gutter'>&nbsp;</th></tr></table>",J=a(f).appendTo(H),ka=J.find("tr"),ka.find("td").click(g).mousedown(la),sa=sa.add(J.find("th:first")),ta=ta.add(J.find("th.fc-agenda-gutter")),H.append("<div class='fc-agenda-divider "+d+"'><div class='fc-agenda-divider-inner'/></div>")):
y=a([]);I=a("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(H);aa=a("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(I);fb=a("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(aa);f="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";h=m();i=k(p(h),da);k(h,oa);for(e=Xa=0;h<i;e++)j=h.getMinutes(),f+="<tr class='fc-slot"+e+" "+(!j?"":"fc-minor")+"'><th class='fc-agenda-axis "+d+"'>"+(!n||!j?V(h,
v("axisFormat")):"&nbsp;")+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",k(h,v("slotMinutes")),Xa++;ma=a(f+"</tbody></table>").appendTo(aa);gb=ma.find("div:first");ma.find("td").click(g).mousedown(N);sa=sa.add(ma.find("th:first"))}h=l(new Date);for(d=0;d<ba;d++)e=w(d),c=A.eq(d),c.html(V(e,ja)),f=O.eq(d),+e==+h?f.addClass(Ca+"-state-highlight fc-today"):f.removeClass(Ca+"-state-highlight fc-today"),Oa(c.add(f),e)};r.setWidth=function(b){hb=b;Ja.clear();na=0;Aa(sa.width("").each(function(b,
d){na=Math.max(na,a(d).outerWidth())}),na);b=I[0].clientWidth;(Ya=I.width()-b)?(Aa(ta,Ya),ta.show().prev().removeClass("fc-last")):ta.hide().prev().addClass("fc-last");Ia=Math.floor((b-na)/ba);Aa(A.slice(0,-1),Ia)};r.setHeight=function(a,b){a===c&&(a=ib);ib=a;U={};var d=G.position().top,f=I.position().top,g=Math.min(a-d,ma.height()+f+1);R.height(g-wa(Q));H.css("top",d);I.height(g-f-1);Ba=gb.height()+1;b&&e()};r.beforeHide=function(){kb=I.scrollTop()};r.afterShow=function(){I.scrollTop(kb)};r.defaultEventEnd=
function(a){var b=p(a.start);return a.allDay?b:k(b,v("defaultEventMinutes"))};r.timePosition=ca;r.dayOfWeekCol=x;r.dateCell=function(a){return{row:Math.floor(t(a,r.visStart)/7),col:x(a.getDay())}};r.cellDate=o;r.cellIsAllDay=q;r.allDayRow=function(){return ka};r.allDayBounds=function(){return{left:na,right:hb-Ya}};r.getHoverListener=function(){return ua};r.colContentLeft=function(a){return Ja.left(a)};r.colContentRight=function(a){return Ja.right(a)};r.getDaySegmentContainer=function(){return y};
r.getSlotSegmentContainer=function(){return fb};r.getMinMinute=function(){return oa};r.getMaxMinute=function(){return da};r.getBodyContent=function(){return aa};r.getRowCnt=function(){return 1};r.getColCnt=function(){return ba};r.getColWidth=function(){return Ia};r.getSlotHeight=function(){return Ba};r.defaultSelectionEnd=function(a,b){return b?p(a):k(p(a),v("slotMinutes"))};r.renderDayOverlay=i;r.renderSelection=function(a,b,d){d?v("allDaySlot")&&i(a,h(p(b),1),!0):F(a,b)};r.clearSelection=ga;r.reportDayClick=
X;r.dragStart=function(a,b){ua.start(function(a){E();if(a)if(q(a))j(a.row,a.col,a.row,a.col);else{var a=o(a),b=k(p(a),v("defaultEventMinutes"));n(a,b)}},b)};r.dragStop=function(a,b,d){var c=ua.stop();E();c&&u("drop",a,o(c),q(c),b,d)};Pa.call(r,b,d,f);Qa.call(r);Ra.call(r);wb.call(r);var v=r.opt,u=r.trigger,K=r.clearEvents,L=r.renderOverlay,E=r.clearOverlays,s=r.reportSelection,Z=r.unselect,la=r.daySelectionMousedown,$=r.slotSegHtml,V=d.formatDate,S,z,A,G,O,M,Q,R,H,y,J,ka,I,aa,fb,ma,gb,sa,ta,ia,hb,
ib,na,Ia,Ya,Ba,kb,ba,Xa,pa,ua,Ja,U={},Ca,za,ha,ea,W,Y,oa,da,ja;Ga(b.addClass("fc-agenda"));pa=new Sa(function(b,d){var c,f,e;A.each(function(b,g){c=a(g);f=c.offset().left;b&&(e[1]=f);e=[f];d[b]=e});e[1]=f+c.outerWidth();if(v("allDaySlot"))c=ka,f=c.offset().top,b[0]=[f,f+c.outerHeight()];for(var g=aa.offset().top,h=I.offset().top,i=h+I.outerHeight(),k=0;k<Xa;k++)b.push([Math.max(h,Math.min(i,g+Ba*k)),Math.max(h,Math.min(i,g+Ba*(k+1)))])});ua=new Ta(pa);Ja=new Ua(function(a){return M.eq(a)})}function wb(){function b(d){var d=
Y(ya(d,a.map(d,N),j.visStart,j.visEnd)),c,f=d.length,e,g,h,i=[];for(c=0;c<f;c++){e=d[c];for(g=0;g<e.length;g++)h=e[g],h.row=0,h.level=c,i.push(h)}return i}function d(a){return a.end?p(a.end):k(p(a.start),m("defaultEventMinutes"))}function f(a,b){var d="<",c=a.url,e=eb(a,m),g=e?" style='"+e+"'":"",h=["fc-event","fc-event-skin","fc-event-vert"];o(a)&&h.push("fc-event-draggable");b.isStart&&h.push("fc-corner-top");b.isEnd&&h.push("fc-corner-bottom");h=h.concat(a.className);a.source&&(h=h.concat(a.source.className||
[]));d=c?d+("a href='"+ra(a.url)+"'"):d+"div";d+=" class='"+h.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner fc-event-skin'"+g+"><div class='fc-event-head fc-event-skin'"+g+"><div class='fc-event-time'>"+ra(I(a.start,a.end,m("timeFormat")))+"</div></div><div class='fc-event-content'><div class='fc-event-title'>"+ra(a.title)+"</div></div><div class='fc-event-bg'></div></div>";b.isEnd&&t(a)&&(d+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");
return d+("</"+(c?"a":"div")+">")}function e(a,b,d){var c=b.find("div.fc-event-time");o(a)&&i(a,b,c);d.isEnd&&t(a)&&l(a,b,c);F(a,b)}function g(a,b,d){function c(){i||(b.width(f).height("").draggable("option","grid",null),i=!0)}var f,e,i=!0,k,j=m("isRTL")?-1:1,l=u(),o=S(),C=z(),B=L();b.draggable({zIndex:9,opacity:m("dragOpacity","month"),revertDuration:m("dragRevertDuration"),start:function(g,B){n("eventDragStart",b,a,g,B);M(a,b);f=b.width();l.start(function(f,g,l,n){y();f?(e=!1,k=n*j,f.row?d?i&&(b.width(o-
10),ab(b,C*Math.round((a.end?(a.end-a.start)/xb:m("defaultEventMinutes"))/m("slotMinutes"))),b.draggable("option","grid",[o,1]),i=!1):e=!0:(H(h(p(a.start),k),h(N(a),k)),c()),e=e||i&&!k):(c(),e=!0);b.draggable("option","revert",e)},g,"drag")},stop:function(d,f){l.stop();y();n("eventDragStop",b,a,d,f);if(e)c(),b.css("filter",""),O(a,b);else{var g=0;i||(g=Math.round((b.offset().top-A().offset().top)/C)*m("slotMinutes")+B-(60*a.start.getHours()+a.start.getMinutes()));Q(this,a,k,g,i,d,f)}}})}function i(a,
b,d){function c(b){var f=k(p(a.start),b),e;a.end&&(e=k(p(a.end),b));d.text(I(f,e,m("timeFormat")))}function f(){g&&(d.css("display",""),b.draggable("option","grid",[v,t]),g=!1)}var e,g=!1,j,l,o,C=m("isRTL")?-1:1,B=u(),q=V(),v=S(),t=z();b.draggable({zIndex:9,scroll:!1,grid:[v,t],axis:1==q?"y":!1,opacity:m("dragOpacity"),revertDuration:m("dragRevertDuration"),start:function(c,i){n("eventDragStart",b,a,c,i);M(a,b);e=b.position();l=o=0;B.start(function(c,e,i,k){b.draggable("option","revert",!c);y();c&&
(j=k*C,m("allDaySlot")&&!c.row?(g||(g=!0,d.hide(),b.draggable("option","grid",null)),H(h(p(a.start),j),h(N(a),j))):f())},c,"drag")},drag:function(a,b){l=Math.round((b.position.top-e.top)/t)*m("slotMinutes");l!=o&&(g||c(l),o=l)},stop:function(d,h){var i=B.stop();y();n("eventDragStop",b,a,d,h);i&&(j||l||g)?Q(this,a,j,g?0:l,g,d,h):(f(),b.css("filter",""),b.css(e),c(0),O(a,b))}})}function l(a,b,d){var c,f,e=z();b.resizable({handles:{s:"div.ui-resizable-s"},grid:e,start:function(d,e){c=f=0;M(a,b);b.css("z-index",
9);n("eventResizeStart",this,a,d,e)},resize:function(g,h){c=Math.round((Math.max(e,b.height())-h.originalSize.height)/e);c!=f&&(d.text(I(a.start,!c&&!a.end?null:k(w(a),m("slotMinutes")*c),m("timeFormat"))),f=c)},stop:function(d,f){n("eventResizeStop",this,a,d,f);c?R(this,a,0,m("slotMinutes")*c,d,f):(b.css("z-index",8),O(a,b))}})}var j=this;j.renderEvents=function(g,i){x(g);var l,o=g.length,q=[],t=[];for(l=0;l<o;l++)g[l].allDay?q.push(g[l]):t.push(g[l]);m("allDaySlot")&&(U(b(q),i),X());var o=V(),q=
L(),w=K(),u=k(p(j.visStart),q),r=a.map(t,d),P,y,M,T,J,I;l=[];for(P=0;P<o;P++){M=y=Y(ya(t,r,u,k(p(u),w-q)));var Q=I=J=T=void 0,R=void 0,H=void 0;for(T=M.length-1;0<T;T--){Q=M[T];for(J=0;J<Q.length;J++){R=Q[J];for(I=0;I<M[T-1].length;I++)if(H=M[T-1][I],R.end>H.start&&R.start<H.end)H.forward=Math.max(H.forward||0,(R.forward||0)+1)}}for(M=0;M<y.length;M++){T=y[M];for(J=0;J<T.length;J++)I=T[J],I.col=P,I.level=M,l.push(I)}h(u,1,!0)}var t=l.length,qa,A,D;y="";w={};u={};P=v();o=V();(M=m("isRTL"))?(T=-1,Q=
o-1):(T=1,Q=0);for(o=0;o<t;o++)q=l[o],r=q.event,J=E(q.start,q.start),I=E(q.start,q.end),qa=q.col,R=q.level,H=q.forward||0,A=s(qa*T+Q),D=Z(qa*T+Q)-A,D=Math.min(D-6,0.95*D),qa=R?D/(R+H+1):H?2*(D/(H+1)-6):D,R=A+D/(R+H+1)*R*T+(M?D-qa:0),q.top=J,q.left=R,q.outerWidth=qa,q.outerHeight=I-J,y+=f(r,q);P[0].innerHTML=y;M=P.children();for(o=0;o<t;o++)q=l[o],r=q.event,y=a(M[o]),T=n("eventRender",r,r,y),!1===T?y.remove():(T&&!0!==T&&(y.remove(),y=a(T).css({position:"absolute",top:q.top,left:q.left}).appendTo(P)),
q.element=y,r._id===i?e(r,y,q):y[0]._fci=o,G(r,y));za(P,l,e);for(o=0;o<t;o++)if(q=l[o],y=q.element)if(P=w[r=q.key=db(y[0])],q.vsides=P===c?w[r]=wa(y,!0):P,P=u[r],q.hsides=P===c?u[r]=La(y)+Ma(y)+Na(y):P,r=y.find("div.fc-event-content"),r.length)q.contentTop=r[0].offsetTop;for(o=0;o<t;o++)if(q=l[o],y=q.element)y[0].style.width=Math.max(0,q.outerWidth-q.hsides)+"px",w=Math.max(0,q.outerHeight-q.vsides),y[0].style.height=w+"px",r=q.event,q.contentTop!==c&&10>w-q.contentTop&&(y.find("div.fc-event-time").text(ka(r.start,
m("timeFormat"))+" - "+r.title),y.find("div.fc-event-title").remove()),n("eventAfterRender",r,r,y)};j.compileDaySegs=b;j.clearEvents=function(){D();r().empty();v().empty()};j.slotSegHtml=f;j.bindDaySeg=function(a,b,d){o(a)&&g(a,b,d.isStart);d.isEnd&&t(a)&&$(a,b,d);F(a,b)};Va.call(j);var m=j.opt,n=j.trigger,o=j.isEventDraggable,t=j.isEventResizable,w=j.eventEnd,x=j.reportEvents,D=j.reportEventClear,F=j.eventElementHandlers,X=j.setHeight,r=j.getDaySegmentContainer,v=j.getSlotSegmentContainer,u=j.getHoverListener,
K=j.getMaxMinute,L=j.getMinMinute,E=j.timePosition,s=j.colContentLeft,Z=j.colContentRight,U=j.renderDaySegs,$=j.resizableDayEvent,V=j.getColCnt,S=j.getColWidth,z=j.getSlotHeight,A=j.getBodyContent,G=j.reportEventElement,O=j.showEvents,M=j.hideEvents,Q=j.eventDrop,R=j.eventResize,H=j.renderDayOverlay,y=j.clearOverlays,J=j.calendar,ka=J.formatDate,I=J.formatDates}function Pa(a,b,d){function f(a,b){var c=r[a];return"object"==typeof c?Ka(c,b||d):c}function e(a,d){return b.trigger.apply(b,[a,d||m].concat(Array.prototype.slice.call(arguments,
2),[m]))}function g(a){return xa(a.editable,(a.source||{}).editable,f("editable"))}function i(a){return a.end?p(a.end):n(a)}function j(a,b,d){var a=F[a._id],c,f=a.length;for(c=0;c<f;c++)if(!b||a[c][0]!=b[0])a[c][d]()}function l(a,b,d,f){for(var d=d||0,e,g=a.length,i=0;i<g;i++){e=a[i];if(f!==c)e.allDay=f;k(h(e.start,b,!0),d);if(e.end)e.end=k(h(e.end,b,!0),d);t(e,r)}}function o(a,b,d){for(var d=d||0,c,f=a.length,e=0;e<f;e++)c=a[e],c.end=k(h(i(c),b,!0),d),t(c,r)}var m=this;m.element=a;m.calendar=b;m.name=
d;m.opt=f;m.trigger=e;m.isEventDraggable=function(a){return g(a)&&!f("disableDragging")};m.isEventResizable=function(a){return g(a)&&!f("disableResizing")};m.reportEvents=function(a){x={};var b,d=a.length,c;for(b=0;b<d;b++)c=a[b],x[c._id]?x[c._id].push(c):x[c._id]=[c]};m.eventEnd=i;m.reportEventElement=function(a,b){D.push(b);F[a._id]?F[a._id].push(b):F[a._id]=[b]};m.reportEventClear=function(){D=[];F={}};m.eventElementHandlers=function(a,b){b.click(function(d){if(!b.hasClass("ui-draggable-dragging")&&
!b.hasClass("ui-resizable-resizing"))return e("eventClick",this,a,d)}).hover(function(b){e("eventMouseover",this,a,b)},function(b){e("eventMouseout",this,a,b)})};m.showEvents=function(a,b){j(a,b,"show")};m.hideEvents=function(a,b){j(a,b,"hide")};m.eventDrop=function(a,b,d,c,f,g,h){var i=b.allDay,k=b._id;l(x[k],d,c,f);e("eventDrop",a,b,d,c,f,function(){l(x[k],-d,-c,i);w(k)},g,h);w(k)};m.eventResize=function(a,b,d,c,f,g){var h=b._id;o(x[h],d,c);e("eventResize",a,b,d,c,function(){o(x[h],-d,-c);w(h)},
f,g);w(h)};var n=m.defaultEventEnd,t=b.normalizeEvent,w=b.reportEventChange,x={},D=[],F={},r=b.options}function Va(){function b(a){var d=l("isRTL"),c,f=a.length,e,g,h,i;c=L();var k=c.left,p=c.right,m,j,o,C,q,B="";for(c=0;c<f;c++)e=a[c],g=e.event,i=["fc-event","fc-event-skin","fc-event-hori"],n(g)&&i.push("fc-event-draggable"),d?(e.isStart&&i.push("fc-corner-right"),e.isEnd&&i.push("fc-corner-left"),m=N(e.end.getDay()-1),j=N(e.start.getDay()),o=e.isEnd?E(m):k,C=e.isStart?s(j):p):(e.isStart&&i.push("fc-corner-left"),
e.isEnd&&i.push("fc-corner-right"),m=N(e.start.getDay()),j=N(e.end.getDay()-1),o=e.isStart?E(m):k,C=e.isEnd?s(j):p),i=i.concat(g.className),g.source&&(i=i.concat(g.source.className||[])),h=g.url,q=eb(g,l),B=h?B+("<a href='"+ra(h)+"'"):B+"<div",B+=" class='"+i.join(" ")+"' style='position:absolute;z-index:8;left:"+o+"px;"+q+"'><div class='fc-event-inner fc-event-skin'"+(q?" style='"+q+"'":"")+">",!g.allDay&&e.isStart&&(B+="<span class='fc-event-time'>"+ra(z(g.start,g.end,l("timeFormat")))+"</span>"),
B+="<span class='fc-event-title'>"+ra(g.title)+"</span></div>",e.isEnd&&t(g)&&(B+="<div class='ui-resizable-handle ui-resizable-"+(d?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),B+="</"+(h?"a":"div")+">",e.left=o,e.outerWidth=C-o,e.startCol=m,e.endCol=j+1;return B}function d(b,c){var f,e=b.length,g,h,i;for(f=0;f<e;f++)g=b[f],h=g.event,i=a(c[f]),h=o("eventRender",h,h,i),!1===h?i.remove():(h&&!0!==h&&(h=a(h).css({position:"absolute",left:g.left}),i.replaceWith(h),i=h),g.element=i)}function f(a){var b,d=a.length,
e,g,h,i,k={};for(b=0;b<d;b++)if(e=a[b],g=e.element)h=e.key=db(g[0]),i=k[h],i===c&&(i=k[h]=La(g)+Ma(g)+Na(g)),e.hsides=i}function e(a){var b,d=a.length,c,f;for(b=0;b<d;b++)if(c=a[b],f=c.element)f[0].style.width=Math.max(0,c.outerWidth-c.hsides)+"px"}function g(a){var b,d=a.length,f,e,h,i,k={};for(b=0;b<d;b++)if(f=a[b],e=f.element)h=f.key,i=k[h],i===c&&(i=k[h]=bb(e)),f.outerHeight=e[0].offsetHeight+i}function i(){var a,b=v(),d=[];for(a=0;a<b;a++)d[a]=K(a).find("td:first div.fc-day-content > div");return d}
function k(a){var b,d=a.length,c=[];for(b=0;b<d;b++)c[b]=a[b][0].offsetTop;return c}function j(a,b){var d,c=a.length,f,e;for(d=0;d<c;d++)if(f=a[d],e=f.element)e[0].style.top=b[f.row]+(f.top||0)+"px",f=f.event,o("eventAfterRender",f,f,e)}var m=this;m.renderDaySegs=function(a,c){var h=V(),m=v(),p=u(),l=0,o,n,q,t=a.length,w,r;h[0].innerHTML=b(a);d(a,h.children());n=a.length;for(o=0;o<n;o++)q=a[o],(r=q.element)&&x(q.event,r);n=a.length;var s;for(o=0;o<n;o++)if(q=a[o],r=q.element)s=q.event,s._id===c?S(s,
r,q):r[0]._fci=o;za(h,a,S);f(a);e(a);g(a);h=i();for(o=0;o<m;o++){n=[];for(q=0;q<p;q++)n[q]=0;for(;l<t&&(w=a[l]).row==o;){q=n.slice(w.startCol,w.endCol);q=Math.max.apply(Math,q);w.top=q;q+=w.outerHeight;for(r=w.startCol;r<w.endCol;r++)n[r]=q;l++}h[o].height(Math.max.apply(Math,n))}j(a,k(h))};m.resizableDayEvent=function(c,n,t){var s=l("isRTL"),x=s?"w":"e",z=n.find("div.ui-resizable-"+x),E=!1;Ga(n);n.mousedown(function(a){a.preventDefault()}).click(function(a){E&&(a.preventDefault(),a.stopImmediatePropagation())});
z.mousedown(function(l){if(1==l.which){E=!0;var z=m.getHoverListener(),nb=v(),J=u(),K=s?-1:1,va=s?J-1:0,N=n.css("top"),ca,L,S=a.extend({},c),ga=U(c.start);O();a("body").css("cursor",x+"-resize").one("mouseup",function(b){o("eventResizeStop",this,c,b);a("body").css("cursor","");z.stop();G();ca&&r(this,c,ca,0,b);setTimeout(function(){E=!1},0)});o("eventResizeStart",this,c,l);z.start(function(m,o){if(m){var l=Math.max(ga.row,m.row),n=m.col;1==nb&&(l=0);l==ga.row&&(n=s?Math.min(ga.col,n):Math.max(ga.col,
n));ca=7*l+n*K+va-(7*o.row+o.col*K+va);l=h(w(c),ca,!0);if(ca){S.end=l;var n=L,q=W([S]),r=t.row,u=a("<div/>"),v=V(),fa=q.length,z;u[0].innerHTML=b(q);u=u.children();v.append(u);d(q,u);f(q);e(q);g(q);j(q,k(i()));u=[];for(v=0;v<fa;v++)if(z=q[v].element)q[v].row===r&&z.css("top",N),u.push(z[0]);L=a(u);L.find("*").css("cursor",x+"-resize");n&&n.remove();F(c)}else L&&(D(c),L.remove(),L=null);G();A(c.start,h(p(l),1))}},l)}})};var l=m.opt,o=m.trigger,n=m.isEventDraggable,t=m.isEventResizable,w=m.eventEnd,
x=m.reportEventElement,D=m.showEvents,F=m.hideEvents,r=m.eventResize,v=m.getRowCnt,u=m.getColCnt,K=m.allDayRow,L=m.allDayBounds,E=m.colContentLeft,s=m.colContentRight,N=m.dayOfWeekCol,U=m.dateCell,W=m.compileDaySegs,V=m.getDaySegmentContainer,S=m.bindDaySeg,z=m.calendar.formatDates,A=m.renderDayOverlay,G=m.clearOverlays,O=m.clearSelection}function Ra(){function b(a){k&&(k=!1,i(),e("unselect",null,a))}function d(a,b,c,f){k=!0;e("select",null,a,b,c,f)}var c=this;c.select=function(a,c,f){b();c||(c=g(a,
f));h(a,c,f);d(a,c,f)};c.unselect=b;c.reportSelection=d;c.daySelectionMousedown=function(e){var g=c.cellDate,k=c.cellIsAllDay,m=c.getHoverListener(),p=c.reportDayClick;if(1==e.which&&f("selectable")){b(e);var j;m.start(function(a,b){i();a&&k(a)?(j=[g(b),g(a)].sort(cb),h(j[0],j[1],!0)):j=null},e);a(document).one("mouseup",function(a){m.stop();j&&(+j[0]==+j[1]&&p(j[0],!0,a),d(j[0],j[1],!0,a))})}};var f=c.opt,e=c.trigger,g=c.defaultSelectionEnd,h=c.renderSelection,i=c.clearSelection,k=!1;f("selectable")&&
f("unselectAuto")&&a(document).mousedown(function(d){var c=f("unselectCancel");(!c||!a(d.target).parents(c).length)&&b(d)})}function Qa(){this.renderOverlay=function(c,f){var e=d.shift();e||(e=a("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));e[0].parentNode!=f[0]&&e.appendTo(f);b.push(e.css(c).show());return e};this.clearOverlays=function(){for(var a;a=b.shift();)d.push(a.hide().unbind())};var b=[],d=[]}function Sa(a){var b,d;this.build=function(){b=[];d=[];a(b,d)};this.cell=
function(a,c){var f=b.length,e=d.length,g,h=-1,i=-1;for(g=0;g<f;g++)if(c>=b[g][0]&&c<b[g][1]){h=g;break}for(g=0;g<e;g++)if(a>=d[g][0]&&a<d[g][1]){i=g;break}return 0<=h&&0<=i?{row:h,col:i}:null};this.rect=function(a,c,f,e,g){g=g.offset();return{top:b[a][0]-g.top,left:d[c][0]-g.left,width:d[e][1]-d[c][0],height:b[f][1]-b[a][0]}}}function Ta(b){function d(a){if(a.pageX===c)a.pageX=a.originalEvent.pageX,a.pageY=a.originalEvent.pageY;a=b.cell(a.pageX,a.pageY);if(!a!=!h||a&&(a.row!=h.row||a.col!=h.col))a?
(g||(g=a),e(a,g,a.row-g.row,a.col-g.col)):e(a,g),h=a}var f,e,g,h;this.start=function(c,i,k){e=c;g=h=null;b.build();d(i);f=k||"mousemove";a(document).bind(f,d)};this.stop=function(){a(document).unbind(f,d);return h}}function Ua(a){var b=this,d={},f={},e={};b.left=function(b){return f[b]=f[b]===c?(d[b]=d[b]||a(b)).position().left:f[b]};b.right=function(f){return e[f]=e[f]===c?b.left(f)+(d[f]=d[f]||a(f)).width():e[f]};b.clear=function(){d={};f={};e={}}}var da={defaultView:"month",aspectRatio:1.35,header:{left:"title",
center:"",right:"today prev,next"},weekends:!0,allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{year:"yyyy",month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{year:"MMMM",month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),
dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),dayNamesShortest:"S,M,T,W,T,F,S".split(","),buttonText:{prev:"&nbsp;&#9668;&nbsp;",next:"&nbsp;&#9658;&nbsp;",prevYear:"&nbsp;&lt;&lt;&nbsp;",nextYear:"&nbsp;&gt;&gt;&nbsp;",today:"today",year:"year",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},yb={header:{left:"next,prev today",
center:"",right:"title"},buttonText:{prev:"&nbsp;&#9658;&nbsp;",next:"&nbsp;&#9668;&nbsp;",prevYear:"&nbsp;&gt;&gt;&nbsp;",nextYear:"&nbsp;&lt;&lt;&nbsp;"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},U=a.fullCalendar={version:"1.5.1"},ea=U.views={};a.fn.fullCalendar=function(b){if("string"==typeof b){var f=Array.prototype.slice.call(arguments,1),e;this.each(function(){var d=a.data(this,"fullCalendar");d&&a.isFunction(d[b])&&(d=d[b].apply(d,f),e===c&&(e=d),"destroy"==b&&a.removeData(this,
"fullCalendar"))});return e!==c?e:this}var g=b.eventSources||[];delete b.eventSources;b.events&&(g.push(b.events),delete b.events);b=a.extend(!0,{},da,b.isRTL||b.isRTL===c&&da.isRTL?yb:{},b);this.each(function(c,f){var e=a(f),h=new d(e,b,g);e.data("fullCalendar",h);h.render()});return this};U.sourceNormalizers=[];U.sourceFetchers=[];var ob={dataType:"json",cache:!1},pb=1;U.addDays=h;U.cloneDate=p;U.parseDate=n;U.parseISO8601=x;U.parseTime=D;U.formatDate=F;U.formatDates=ha;var sb="sun,mon,tue,wed,thu,fri,sat".split(","),
$a=864E5,qb=36E5,xb=6E4,rb={s:function(a){return a.getSeconds()},ss:function(a){return ja(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return ja(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ja(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ja(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ja(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},e:function(a,b){return b.dayNamesShortest[a.getDay()]},
dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return ja(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>
a.getHours()?"AM":"PM"},u:function(a){return F(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"}};U.applyAll=Fa;ea.year=function(a,b){var d=this;d.render=function(a,b){if(b)d.curYear=g(a,b);var h=p(a,!0);h.setFullYear(h.getFullYear(),0,1);var i=p(a);i.setFullYear(i.getFullYear(),11,31);var k=p(h),m=p(i),j=c("weekends")?0:1;d.title=e(h,c("titleFormat"));d.start=h;d.end=i;d.visStart=k;d.visEnd=m;f("4x3",6,j?5:7,!0)};tb.call(d,a,b,"year");
var c=d.opt,f=d.renderYear,e=b.formatDate};ea.month=function(a,b){var d=this;d.render=function(a,b){b&&(i(a,b),a.setDate(1));var g=p(a,!0);g.setDate(1);var k=i(p(g),1),m=p(g),j=p(k),l=c("firstDay"),n=c("weekends")?0:1;n&&(o(m),o(j,-1,!0));h(m,-((m.getDay()-Math.max(l,n)+7)%7));h(j,(7-j.getDay()+Math.max(l,n))%7);l=Math.round((j-m)/(7*$a));"fixed"==c("weekMode")&&(h(j,7*(6-l)),l=6);d.title=e(g,c("titleFormat"));d.start=g;d.end=k;d.visStart=m;d.visEnd=j;f(6,l,n?5:7,!0)};Wa.call(d,a,b,"month");var c=
d.opt,f=d.renderBasic,e=b.formatDate};ea.basicWeek=function(a,b){var d=this;d.render=function(a,b){b&&h(a,7*b);var g=h(p(a),-((a.getDay()-c("firstDay")+7)%7)),i=h(p(g),7),k=p(g),m=p(i),j=c("weekends");j||(o(k),o(m,-1,!0));d.title=e(k,h(p(m),-1),c("titleFormat"));d.start=g;d.end=i;d.visStart=k;d.visEnd=m;f(1,1,j?7:5,!1)};Wa.call(d,a,b,"basicWeek");var c=d.opt,f=d.renderBasic,e=b.formatDates};ea.basicDay=function(a,b){var d=this;d.render=function(a,b){b&&(h(a,b),c("weekends")||o(a,0>b?-1:1));d.title=
e(a,c("titleFormat"));d.start=d.visStart=p(a,!0);d.end=d.visEnd=h(p(d.start),1);f(1,1,1,!1)};Wa.call(d,a,b,"basicDay");var c=d.opt,f=d.renderBasic,e=b.formatDate};b({weekMode:"fixed"});ea.agendaWeek=function(a,b){var d=this;d.render=function(a,b){b&&h(a,7*b);var g=h(p(a),-((a.getDay()-c("firstDay")+7)%7)),i=h(p(g),7),k=p(g),m=p(i),j=c("weekends");j||(o(k),o(m,-1,!0));d.title=e(k,h(p(m),-1),c("titleFormat"));d.start=g;d.end=i;d.visStart=k;d.visEnd=m;f(j?7:5)};jb.call(d,a,b,"agendaWeek");var c=d.opt,
f=d.renderAgenda,e=b.formatDates};ea.agendaDay=function(a,b){var d=this;d.render=function(a,b){b&&(h(a,b),c("weekends")||o(a,0>b?-1:1));var g=p(a,!0),i=h(p(g),1);d.title=e(a,c("titleFormat"));d.start=d.visStart=g;d.end=d.visEnd=i;f(1)};jb.call(d,a,b,"agendaDay");var c=d.opt,f=d.renderAgenda,e=b.formatDate};b({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);
(function(a){function c(a,b,d){var c=b;10>b&&(c="0"+b);if(d.isoTime)return b=a,10>b&&(b="0"+a),b+":"+c;b=a%12;0==b&&(b=12);return b+":"+c+(d.meridiemUpperCase?12>a?"AM":"PM":12>a?"am":"pm")}function b(a){if((a=a=/(\d+)\s*[:\-\.,]\s*(\d+)\s*(am|pm)?/i.exec(a))&&3<=a.length){var b=Number(a[1]),d=Number(a[2]);12==b&&a[3]&&(b-=12);a[3]&&"pm"==a[3].toLowerCase()&&(b+=12);return{hour:b,minute:d}}return null}function d(a){return a&&60*a.hour+a.minute}function f(f,g){for(var i=d(g.minTime),h=d(g.maxTime),
j=d(g.defaultTime),k=g.selection&&d(b(g.selection)),l=g.minutes,p=g.onehour,m=g.hours,k=k&&Math.floor((k-i)/g.timeInterval)*g.timeInterval+i,o,t=a("<ul></ul>"),w=i;w<=h;w+=g.timeInterval)(function(b){var d=c(Math.floor(b/60),b%60,g),f=d;if(g.showDuration)var e=b-i,f=60>e?f+(" ("+e+" "+l+")"):60==e?f+(" ("+p+")"):f+(" ("+Math.round(10*(e/60))/10+" "+m+")");f=a("<li></li>").append(a('<a href="javascript:void(0);">'+f+"</a>").click(function(){g&&g.selectTime&&g.selectTime(d);return!1}).mousemove(function(){a("li.selected",
t).removeClass("selected")}).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})).appendTo(t);!o&&b==j&&(o=f);k==b&&(f.addClass("selected").addClass("ui-state-highlight"),o=f)})(w);o&&setTimeout(function(){f[0].scrollTop=o[0].offsetTop-2*o.height()},0);f.empty().append(t)}a.fn.calendricalTime=function(d){d=d||{};d.timeInterval=d.timeInterval||30;d.padding=d.padding||4;return this.each(function(){var c=a(this),i,h=!1;c.bind("focus click",function(){if(!i){var j=
c.position();i=a("<div></div>").addClass("calendricalTimePopup ui-widget ui-widget-content").mouseenter(function(){h=!0}).mouseleave(function(){h=!1}).mousedown(function(a){a.preventDefault()}).css({position:"absolute",left:j.left,top:j.top+c.height()+2*d.padding});c.after(i);j={selection:c.val(),selectTime:function(a){h=!1;c.val(a);i.remove();i=null},isoTime:d.isoTime||!1,meridiemUpperCase:d.meridiemUpperCase||!1,defaultTime:d.defaultTime||{hour:8,minute:0},minTime:d.minTime||{hour:0,minute:0},maxTime:d.maxTime||
{hour:23,minute:59},timeInterval:d.timeInterval||30,minutes:d.minutes||"mins",onehour:d.onehour||"1 hr",hours:d.hours||"hrs"};if(d.startTime){var k=b(d.startTime.val());d.startDate&&d.endDate&&!areDatesEqual(parseDate(d.startDate.val()),parseDate(d.endDate.val()))&&(k=null);if(k)j.minTime=k,j.showDuration=!0,i.addClass("calendricalEndTimePopup")}f(i,j)}}).blur(function(){h?i&&c.focus():i&&(i.remove(),i=null)})})};a.fn.calendricalTimeRange=function(b){2<=this.length&&(a(this[0]).calendricalTime(b),
a(this[1]).calendricalTime(a.extend({startTime:a(this[0])},b)));return this}})(jQuery);
(function(a){function c(){this.regional=[];this.regional[""]={currentText:"Now",closeText:"Done",ampm:!1,timeFormat:"hh:mm tt",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",timezoneText:"Time Zone"};this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showTimezone:!1,showTime:!0,stepHour:0.05,stepMinute:0.05,stepSecond:0.05,hour:0,minute:0,second:0,timezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,hourMax:23,
minuteMax:59,secondMax:59,minDateTime:null,maxDateTime:null,hourGrid:0,minuteGrid:0,secondGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,showTimepicker:!0,timezoneList:"-1100,-1000,-0900,-0800,-0700,-0600,-0500,-0400,-0300,-0200,-0100,+0000,+0100,+0200,+0300,+0400,+0500,+0600,+0700,+0800,+0900,+1000,+1100,+1200".split(",")};a.extend(this._defaults,this.regional[""])}a.extend(a.ui,{timepicker:{version:"0.9.4"}});a.extend(c.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,
minute_slider:null,second_slider:null,timezone_select:null,hour:0,minute:0,second:0,timezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:"-1100,-1000,-0900,-0800,-0700,-0600,-0500,-0400,-0300,-0200,-0100,+0000,+0100,+0200,+0300,+0400,+0500,+0600,+0700,+0800,+0900,+1000,+1100,+1200".split(","),setDefaults:function(b){var d=this._defaults,
b=b||{};a.extend(d,b);for(var c in b)if(null===b[c]||void 0===b[c])d[c]=b[c];return this},_newInst:function(b,d){var f=new c,e={},g;for(g in this._defaults){var i=b.attr("time:"+g);if(i)try{e[g]=eval(i)}catch(h){e[g]=i}}f._defaults=a.extend({},this._defaults,e,d,{beforeShow:function(b,c){a.isFunction(d.beforeShow)&&d.beforeShow(b,c,f)},onChangeMonthYear:function(c,e,g){f._updateDateTime(g);a.isFunction(d.onChangeMonthYear)&&d.onChangeMonthYear.call(b[0],c,e,g,f)},onClose:function(c,e){!0===f.timeDefined&&
""!=b.val()&&f._updateDateTime(e);a.isFunction(d.onClose)&&d.onClose.call(b[0],c,e,f)},timepicker:f});f.hour=f._defaults.hour;f.minute=f._defaults.minute;f.second=f._defaults.second;f.ampm="";f.$input=b;if(d.altField)f.$altInput=a(d.altField).css({cursor:"pointer"}).focus(function(){b.trigger("focus")});if(void 0!==f._defaults.minDate&&f._defaults.minDate instanceof Date)f._defaults.minDateTime=new Date(f._defaults.minDate.getTime());if(void 0!==f._defaults.minDateTime&&f._defaults.minDateTime instanceof
Date)f._defaults.minDate=new Date(f._defaults.minDateTime.getTime());if(void 0!==f._defaults.maxDate&&f._defaults.maxDate instanceof Date)f._defaults.maxDateTime=new Date(f._defaults.maxDate.getTime());if(void 0!==f._defaults.maxDateTime&&f._defaults.maxDateTime instanceof Date)f._defaults.maxDate=new Date(f._defaults.maxDateTime.getTime());return f},_addTimePicker:function(a){this.timeDefined=this._parseTime(this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():
this.$input.val());this._limitMinMaxDateTime(a,!1);this._injectTimePicker()},_parseTime:function(b,d){var c=this._defaults.timeFormat.toString().replace(/h{1,2}/ig,"(\\d?\\d)").replace(/m{1,2}/ig,"(\\d?\\d)").replace(/s{1,2}/ig,"(\\d?\\d)").replace(/t{1,2}/ig,"(am|pm|a|p)?").replace(/z{1}/ig,"((\\+|-)\\d\\d\\d\\d)?").replace(/\s/g,"\\s?")+"$",e=this._getFormatPositions();if(!this.inst)this.inst=a.datepicker._getInst(this.$input[0]);if(d||!this._defaults.timeOnly)c=".{"+a.datepicker._get(this.inst,
"dateFormat").length+",}"+this._defaults.separator.replace(RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&")+c;if(c=b.match(RegExp(c,"i"))){if(-1!==e.t)this.ampm=(void 0===c[e.t]||0===c[e.t].length?"":"A"==c[e.t].charAt(0).toUpperCase()?"AM":"PM").toUpperCase();if(-1!==e.h)this.hour="AM"==this.ampm&&"12"==c[e.h]?0:"PM"==this.ampm&&"12"!=c[e.h]?(parseFloat(c[e.h])+12).toFixed(0):Number(c[e.h]);if(-1!==e.m)this.minute=Number(c[e.m]);if(-1!==e.s)this.second=Number(c[e.s]);if(-1!==e.z)this.timezone=c[e.z];
return!0}return!1},_getFormatPositions:function(){var a=this._defaults.timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|t{1,2}|z)/g),d={h:-1,m:-1,s:-1,t:-1,z:-1};if(a)for(var c=0;c<a.length;c++)-1==d[a[c].toString().charAt(0)]&&(d[a[c].toString().charAt(0)]=c+1);return d},_injectTimePicker:function(){var b=this.inst.dpDiv,d=this._defaults,c=this,e=(d.hourMax-d.hourMax%d.stepHour).toFixed(0),g=(d.minuteMax-d.minuteMax%d.stepMinute).toFixed(0),i=(d.secondMax-d.secondMax%d.stepSecond).toFixed(0),
h=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(0===b.find("div#ui-timepicker-div-"+h).length&&d.showTimepicker){var j='<div class="ui-timepicker-div" id="ui-timepicker-div-'+h+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+h+'"'+(d.showTime?"":' style="display:none;"')+">"+d.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+h+'"'+(d.showTime?"":' style="display:none;"')+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+h+'"'+(d.showHour?
"":' style="display:none;"')+">"+d.hourText+"</dt>",k=0,l=0,p=0,m;if(d.showHour&&0<d.hourGrid){for(var j=j+('<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+h+'"'+(d.showHour?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>'),o=d.hourMin;o<e;o+=d.hourGrid){k++;var t=d.ampm&&12<o?o-12:o;10>t&&(t="0"+t);d.ampm&&(t=0==o?"12a":12>o?t+"a":t+"p");j+="<td>"+t+"</td>"}j+="</tr></table></div></dd>"}else j+='<dd class="ui_tpicker_hour" id="ui_tpicker_hour_'+h+'"'+(d.showHour?
"":' style="display:none;"')+"></dd>";j+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+h+'"'+(d.showMinute?"":' style="display:none;"')+">"+d.minuteText+"</dt>";if(d.showMinute&&0<d.minuteGrid){j+='<dd class="ui_tpicker_minute ui_tpicker_minute_'+d.minuteGrid+'"><div id="ui_tpicker_minute_'+h+'"'+(d.showMinute?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(o=d.minuteMin;o<g;o+=d.minuteGrid)l++,j+="<td>"+(10>o?"0":"")+o+"</td>";j+="</tr></table></div></dd>"}else j+=
'<dd class="ui_tpicker_minute" id="ui_tpicker_minute_'+h+'"'+(d.showMinute?"":' style="display:none;"')+"></dd>";j+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+h+'"'+(d.showSecond?"":' style="display:none;"')+">"+d.secondText+"</dt>";if(d.showSecond&&0<d.secondGrid){j+='<dd class="ui_tpicker_second ui_tpicker_second_'+d.secondGrid+'"><div id="ui_tpicker_second_'+h+'"'+(d.showSecond?"":' style="display:none;"')+'></div><div style="padding-left: 1px"><table><tr>';for(o=d.secondMin;o<
i;o+=d.secondGrid)p++,j+="<td>"+(10>o?"0":"")+o+"</td>";j+="</tr></table></div></dd>"}else j+='<dd class="ui_tpicker_second" id="ui_tpicker_second_'+h+'"'+(d.showSecond?"":' style="display:none;"')+"></dd>";j+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+h+'"'+(d.showTimezone?"":' style="display:none;"')+">"+d.timezoneText+"</dt>";j+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+h+'"'+(d.showTimezone?"":' style="display:none;"')+"></dd>";$tp=a(j+"</dl></div>");
!0===d.timeOnly&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+d.timeOnlyTitle+"</div></div>"),b.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());this.hour_slider=$tp.find("#ui_tpicker_hour_"+h).slider({orientation:"horizontal",value:this.hour,min:d.hourMin,max:e,step:d.stepHour,slide:function(a,b){c.hour_slider.slider("option","value",b.value);c._onTimeChange()}});this.minute_slider=$tp.find("#ui_tpicker_minute_"+h).slider({orientation:"horizontal",
value:this.minute,min:d.minuteMin,max:g,step:d.stepMinute,slide:function(a,b){c.minute_slider.slider("option","value",b.value);c._onTimeChange()}});this.second_slider=$tp.find("#ui_tpicker_second_"+h).slider({orientation:"horizontal",value:this.second,min:d.secondMin,max:i,step:d.stepSecond,slide:function(a,b){c.second_slider.slider("option","value",b.value);c._onTimeChange()}});this.timezone_select=$tp.find("#ui_tpicker_timezone_"+h).append("<select></select>").find("select");a.fn.append.apply(this.timezone_select,
a.map(d.timezoneList,function(b){return a("<option />").val("object"==typeof b?b.value:b).text("object"==typeof b?b.label:b)}));this.timezone_select.val("undefined"!=typeof this.timezone&&null!=this.timezone&&""!=this.timezone?this.timezone:d.timezone);this.timezone_select.change(function(){c._onTimeChange()});d.showHour&&0<d.hourGrid&&(m=100*k*d.hourGrid/(e-d.hourMin),$tp.find(".ui_tpicker_hour table").css({width:m+"%",marginLeft:m/(-2*k)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){var b=
a(this).html();if(d.ampm)var e=b.substring(2).toLowerCase(),b=parseInt(b.substring(0,2)),b="a"==e?12==b?0:b:12==b?12:b+12;c.hour_slider.slider("option","value",b);c._onTimeChange();c._onSelectHandler()}).css({cursor:"pointer",width:100/k+"%",textAlign:"center",overflow:"hidden"})}));d.showMinute&&0<d.minuteGrid&&(m=100*l*d.minuteGrid/(g-d.minuteMin),$tp.find(".ui_tpicker_minute table").css({width:m+"%",marginLeft:m/(-2*l)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){c.minute_slider.slider("option",
"value",a(this).html());c._onTimeChange();c._onSelectHandler()}).css({cursor:"pointer",width:100/l+"%",textAlign:"center",overflow:"hidden"})}));d.showSecond&&0<d.secondGrid&&$tp.find(".ui_tpicker_second table").css({width:m+"%",marginLeft:m/(-2*p)+"%",borderCollapse:"collapse"}).find("td").each(function(){a(this).click(function(){c.second_slider.slider("option","value",a(this).html());c._onTimeChange();c._onSelectHandler()}).css({cursor:"pointer",width:100/p+"%",textAlign:"center",overflow:"hidden"})});
e=b.find(".ui-datepicker-buttonpane");e.length?e.before($tp):b.append($tp);this.$timeObj=$tp.find("#ui_tpicker_time_"+h);if(null!==this.inst)b=this.timeDefined,this._onTimeChange(),this.timeDefined=b;b=function(){c._onSelectHandler()};this.hour_slider.bind("slidestop",b);this.minute_slider.bind("slidestop",b);this.second_slider.bind("slidestop",b)}},_limitMinMaxDateTime:function(a,d){var c=this._defaults,e=new Date(a.selectedYear,a.selectedMonth,a.selectedDay);if(this._defaults.showTimepicker){if(null!==
this._defaults.minDateTime&&e){var g=this._defaults.minDateTime,i=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal)this.hourMinOriginal=c.hourMin,this.minuteMinOriginal=c.minuteMin,this.secondMinOriginal=c.secondMin;if(a.settings.timeOnly||i.getTime()==e.getTime())if(this._defaults.hourMin=g.getHours(),this.hour<=this._defaults.hourMin)if(this.hour=this._defaults.hourMin,this._defaults.minuteMin=
g.getMinutes(),this.minute<=this._defaults.minuteMin)this.minute=this._defaults.minuteMin,this._defaults.secondMin=g.getSeconds();else{if(this.second<this._defaults.secondMin)this.second=this._defaults.secondMin;this._defaults.secondMin=this.secondMinOriginal}else this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal;else this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal}if(null!==
this._defaults.maxDateTime&&e){g=this._defaults.maxDateTime;i=new Date(g.getFullYear(),g.getMonth(),g.getDate(),0,0,0,0);if(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)this.hourMaxOriginal=c.hourMax,this.minuteMaxOriginal=c.minuteMax,this.secondMaxOriginal=c.secondMax;if(a.settings.timeOnly||i.getTime()==e.getTime())if(this._defaults.hourMax=g.getHours(),this.hour>=this._defaults.hourMax)if(this.hour=this._defaults.hourMax,this._defaults.minuteMax=g.getMinutes(),
this.minute>=this._defaults.minuteMax)this.minute=this._defaults.minuteMax,this._defaults.secondMin=g.getSeconds();else{if(this.second>this._defaults.secondMax)this.second=this._defaults.secondMax;this._defaults.secondMax=this.secondMaxOriginal}else this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal;else this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal}void 0!==d&&
!0===d&&(this.hour_slider.slider("option",{min:this._defaults.hourMin,max:this._defaults.hourMax}).slider("value",this.hour),this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:this._defaults.minuteMax}).slider("value",this.minute),this.second_slider.slider("option",{min:this._defaults.secondMin,max:this._defaults.secondMax}).slider("value",this.second))}},_onTimeChange:function(){var a=this.hour_slider?this.hour_slider.slider("value"):!1,d=this.minute_slider?this.minute_slider.slider("value"):
!1,c=this.second_slider?this.second_slider.slider("value"):!1,e=this.timezone_select?this.timezone_select.val():!1;!1!==a&&(a=parseInt(a,10));!1!==d&&(d=parseInt(d,10));!1!==c&&(c=parseInt(c,10));var g=12>a?"AM":"PM",i=a!=this.hour||d!=this.minute||c!=this.second||0<this.ampm.length&&this.ampm!=g||e!=this.timezone;if(i){if(!1!==a)this.hour=a;if(!1!==d)this.minute=d;if(!1!==c)this.second=c;if(!1!==e)this.timezone=e;this._limitMinMaxDateTime(this.inst,!0)}if(this._defaults.ampm)this.ampm=g;this._formatTime();
this.$timeObj&&this.$timeObj.text(this.formattedTime);this.timeDefined=!0;i&&this._updateDateTime()},_onSelectHandler:function(){var a=this._defaults.onSelect,d=this.$input?this.$input[0]:null;a&&d&&a.apply(d,[this.formattedDateTime,this])},_formatTime:function(b,d,c){if(void 0==c)c=this._defaults.ampm;var b=b||{hour:this.hour,minute:this.minute,second:this.second,ampm:this.ampm,timezone:this.timezone},e=d||this._defaults.timeFormat.toString();if(c)var g="AM"==b.ampm?b.hour:b.hour%12,g=0===Number(g)?
12:g,e=e.toString().replace(/hh/g,(10>g?"0":"")+g).replace(/h/g,g).replace(/mm/g,(10>b.minute?"0":"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?"0":"")+b.second).replace(/s/g,b.second).replace(/TT/g,b.ampm.toUpperCase()).replace(/tt/g,b.ampm.toLowerCase()).replace(/T/g,b.ampm.charAt(0).toUpperCase()).replace(/t/g,b.ampm.charAt(0).toLowerCase()).replace(/z/g,b.timezone);else e=e.toString().replace(/hh/g,(10>b.hour?"0":"")+b.hour).replace(/h/g,b.hour).replace(/mm/g,(10>b.minute?"0":
"")+b.minute).replace(/m/g,b.minute).replace(/ss/g,(10>b.second?"0":"")+b.second).replace(/s/g,b.second).replace(/z/g,b.timezone),e=a.trim(e.replace(/t/gi,""));if(arguments.length)return e;this.formattedTime=e},_updateDateTime:function(b){b=this.inst||b;dt=new Date(b.selectedYear,b.selectedMonth,b.selectedDay);dateFmt=a.datepicker._get(b,"dateFormat");formatCfg=a.datepicker._getFormatConfig(b);timeAvailable=null!==dt&&this.timeDefined;var d=this.formattedDate=a.datepicker.formatDate(dateFmt,null===
dt?new Date:dt,formatCfg);if(!(void 0!==b.lastVal&&0<b.lastVal.length&&0===this.$input.val().length)){if(!0===this._defaults.timeOnly)d=this.formattedTime;else if(!0!==this._defaults.timeOnly&&(this._defaults.alwaysSetTime||timeAvailable))d+=this._defaults.separator+this.formattedTime;this.formattedDateTime=d;this._defaults.showTimepicker?this.$altInput&&!0===this._defaults.altFieldTimeOnly?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):(this.$altInput&&this.$altInput.val(d),
this.$input.val(d)):this.$input.val(this.formattedDate);this.$input.trigger("change")}}});a.fn.extend({timepicker:function(b){var b=b||{},d=arguments;"object"==typeof b&&(d[0]=a.extend(b,{timeOnly:!0}));return a(this).each(function(){a.fn.datetimepicker.apply(a(this),d)})},datetimepicker:function(b){var b=b||{},d=arguments;return"string"==typeof b?"getDate"==b?a.fn.datepicker.apply(a(this[0]),d):this.each(function(){var b=a(this);b.datepicker.apply(b,d)}):this.each(function(){var d=a(this);d.datepicker(a.timepicker._newInst(d,
b)._defaults)})}});a.datepicker._base_selectDate=a.datepicker._selectDate;a.datepicker._selectDate=function(b,d){var c=this._getInst(a(b)[0]),e=this._get(c,"timepicker");e?(e._limitMinMaxDateTime(c,!0),c.inline=c.stay_open=!0,this._base_selectDate(b,d+e._defaults.separator+e.formattedTime),c.inline=c.stay_open=!1,this._notifyChange(c),this._updateDatepicker(c)):this._base_selectDate(b,d)};a.datepicker._base_updateDatepicker=a.datepicker._updateDatepicker;a.datepicker._updateDatepicker=function(a){if("boolean"!==
typeof a.stay_open||!1===a.stay_open){this._base_updateDatepicker(a);var d=this._get(a,"timepicker");d&&d._addTimePicker(a)}};a.datepicker._base_doKeyPress=a.datepicker._doKeyPress;a.datepicker._doKeyPress=function(b){var d=a.datepicker._getInst(b.target),c=a.datepicker._get(d,"timepicker");if(c&&a.datepicker._get(d,"constrainInput")){var e=c._defaults.ampm,d=c._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,e?"APM":"").replace(/T/g,e?"AP":"").replace(/tt/g,e?"apm":"").replace(/t/g,
e?"ap":"")+" "+c._defaults.separator+a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),c=String.fromCharCode(void 0===b.charCode?b.keyCode:b.charCode);return b.ctrlKey||" ">c||!d||-1<d.indexOf(c)}return a.datepicker._base_doKeyPress(b)};a.datepicker._base_doKeyUp=a.datepicker._doKeyUp;a.datepicker._doKeyUp=function(b){var d=a.datepicker._getInst(b.target),c=a.datepicker._get(d,"timepicker");if(c&&c._defaults.timeOnly&&d.input.val()!=d.lastVal)try{a.datepicker._updateDatepicker(d)}catch(e){a.datepicker.log(e)}return a.datepicker._base_doKeyUp(b)};
a.datepicker._base_gotoToday=a.datepicker._gotoToday;a.datepicker._gotoToday=function(b){this._base_gotoToday(b);this._setTime(this._getInst(a(b)[0]),new Date)};a.datepicker._disableTimepickerDatepicker=function(b){var d=this._getInst(b),c=this._get(d,"timepicker");a(b).datepicker("getDate");if(c)c._defaults.showTimepicker=!1,c._updateDateTime(d)};a.datepicker._enableTimepickerDatepicker=function(b){var d=this._getInst(b),c=this._get(d,"timepicker");a(b).datepicker("getDate");if(c)c._defaults.showTimepicker=
!0,c._addTimePicker(d),c._updateDateTime(d)};a.datepicker._setTime=function(a,d){var c=this._get(a,"timepicker");if(c){var e=c._defaults,g=d?d.getHours():e.hour,i=d?d.getMinutes():e.minute,h=d?d.getSeconds():e.second;if(g<e.hourMin||g>e.hourMax||i<e.minuteMin||i>e.minuteMax||h<e.secondMin||h>e.secondMax)g=e.hourMin,i=e.minuteMin,h=e.secondMin;c.hour_slider?c.hour_slider.slider("value",g):c.hour=g;c.minute_slider?c.minute_slider.slider("value",i):c.minute=i;c.second_slider?c.second_slider.slider("value",
h):c.second=h;c._onTimeChange();c._updateDateTime(a)}};a.datepicker._setTimeDatepicker=function(a,d,c){var a=this._getInst(a),e=this._get(a,"timepicker");e&&(this._setDateFromField(a),d&&("string"==typeof d?(e._parseTime(d,c),d=new Date,d.setHours(e.hour,e.minute,e.second)):d=new Date(d.getTime()),"Invalid Date"==d.toString()&&(d=void 0),this._setTime(a,d)))};a.datepicker._base_setDateDatepicker=a.datepicker._setDateDatepicker;a.datepicker._setDateDatepicker=function(a,d){var c=this._getInst(a),e=
d instanceof Date?new Date(d.getTime()):d;this._updateDatepicker(c);this._base_setDateDatepicker.apply(this,arguments);this._setTimeDatepicker(a,e,!0)};a.datepicker._base_getDateDatepicker=a.datepicker._getDateDatepicker;a.datepicker._getDateDatepicker=function(b,d){var c=this._getInst(b),e=this._get(c,"timepicker");return e?(this._setDateFromField(c,d),(c=this._getDate(c))&&e._parseTime(a(b).val(),!0)&&c.setHours(e.hour,e.minute,e.second),c):this._base_getDateDatepicker(b,d)};a.timepicker=new c;
a.timepicker.version="0.9.4"})(jQuery);
(function(a){a(document.body).is("[role]")||a(document.body).attr("role","application");var c=0;a.widget("ui.tooltip",{options:{tooltipClass:"ui-widget-content",content:function(){return a(this).attr("title")},position:{my:"left center",at:"right center",offset:"15 0"}},_init:function(){var b=this;this.tooltip=a("<div></div>").attr("id","ui-tooltip-"+c++).attr("role","tooltip").attr("aria-hidden","true").addClass("ui-tooltip ui-widget ui-corner-all").addClass(this.options.tooltipClass).appendTo(document.body).hide();this.tooltipContent=
a("<div></div>").addClass("ui-tooltip-content").appendTo(this.tooltip);this.opacity=this.tooltip.css("opacity");this.element.bind("focus.tooltip mouseenter.tooltip",function(a){b.open(a)}).bind("blur.tooltip mouseleave.tooltip",function(a){b.close(a)})},enable:function(){this.options.disabled=!1},disable:function(){this.options.disabled=!0},destroy:function(){this.tooltip.remove();a.Widget.prototype.destroy.apply(this,arguments)},widget:function(){return this.tooltip},open:function(a){var c=this.element;
if(!(this.current&&this.current[0]==c[0])){var f=this;this.current=c;this.currentTitle=c.attr("title");var e=this.options.content.call(c[0],function(e){f.current==c&&f._show(a,c,e)});e&&f._show(a,c,e)}},_show:function(b,c,f){f&&(c.attr("title",""),this.options.disabled||(this.tooltipContent.html(f),this.tooltip.css({top:0,left:0}).show().position(a.extend(this.options.position,{of:c})).hide(),this.tooltip.attr("aria-hidden","false"),c.attr("aria-describedby",this.tooltip.attr("id")),this.tooltip.is(":animated")?
this.tooltip.stop().show().fadeTo("normal",this.opacity):this.tooltip.is(":visible")?this.tooltip.fadeTo("normal",this.opacity):this.tooltip.fadeIn(),this._trigger("open",b)))},close:function(b){if(this.current&&(this.current.attr("title",this.currentTitle),!this.options.disabled))this.current.removeAttr("aria-describedby"),this.current=null,this.tooltip.attr("aria-hidden","true"),this.tooltip.is(":animated")?this.tooltip.stop().fadeTo("normal",0,function(){a(this).hide().css("opacity","")}):this.tooltip.stop().fadeOut(),
this._trigger("close",b)}})})(jQuery);
(function(a){a.jgrid=a.jgrid||{};a.extend(a.jgrid,{guid:1,uidPref:"jqg",randId:function(c){return(c?c:a.jgrid.uidPref)+a.jgrid.guid++}});a.extend(a.jgrid,{showModal:function(a){a.w.show()},closeModal:function(a){a.w.hide().attr("aria-hidden","true");a.o&&a.o.remove()},hideModal:function(c,b){b=a.extend({jqm:!0,gb:""},b||{});if(b.onClose){var d=b.onClose(c);if("boolean"==typeof d&&!d)return}if(a.fn.jqm&&!0===b.jqm)a(c).attr("aria-hidden","true").jqmHide();else{if(""!==b.gb)try{a(".jqgrid-overlay:first",
b.gb).hide()}catch(f){}a(c).hide().attr("aria-hidden","true")}},findPos:function(a){var b=0,d=0;if(a.offsetParent){do b+=a.offsetLeft,d+=a.offsetTop;while(a=a.offsetParent)}return[b,d]},createModal:function(c,b,d,f,e,g,i){var h=document.createElement("div"),j,k=this,i=a.extend({},i||{});j="rtl"==a(d.gbox).attr("dir")?!0:!1;h.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";h.id=c.themodal;var l=document.createElement("div");l.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";
l.id=c.modalhead;a(l).append("<span class='ui-jqdialog-title'>"+d.caption+"</span>");var p=a("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){p.addClass("ui-state-hover")},function(){p.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");a(l).append(p);j?(h.dir="rtl",a(".ui-jqdialog-title",l).css("float","right"),a(".ui-jqdialog-titlebar-close",l).css("left","0.3em")):(h.dir="ltr",a(".ui-jqdialog-title",l).css("float",
"left"),a(".ui-jqdialog-titlebar-close",l).css("right","0.3em"));var m=document.createElement("div");a(m).addClass("ui-jqdialog-content ui-widget-content").attr("id",c.modalcontent);a(m).append(b);h.appendChild(m);a(h).prepend(l);!0===g?a("body").append(h):"string"==typeof g?a(g).append(h):a(h).insertBefore(f);a(h).css(i);if("undefined"===typeof d.jqModal)d.jqModal=!0;b={};if(a.fn.jqm&&!0===d.jqModal){if(0===d.left&&0===d.top&&d.overlay)i=[],i=this.findPos(e),d.left=i[0]+4,d.top=i[1]+4;b.top=d.top+
"px";b.left=d.left}else if(0!==d.left||0!==d.top)b.left=d.left,b.top=d.top+"px";a("a.ui-jqdialog-titlebar-close",l).click(function(){var b=a("#"+c.themodal).data("onClose")||d.onClose,f=a("#"+c.themodal).data("gbox")||d.gbox;k.hideModal("#"+c.themodal,{gb:f,jqm:d.jqModal,onClose:b});return!1});if(0===d.width||!d.width)d.width=300;if(0===d.height||!d.height)d.height=200;if(!d.zIndex)f=a(f).parents("*[role=dialog]").filter(":first").css("z-index"),d.zIndex=f?parseInt(f,10)+1:950;f=0;if(j&&b.left&&!g)f=
a(d.gbox).width()-(!isNaN(d.width)?parseInt(d.width,10):0)-8,b.left=parseInt(b.left,10)+parseInt(f,10);b.left&&(b.left+="px");a(h).css(a.extend({width:isNaN(d.width)?"auto":d.width+"px",height:isNaN(d.height)?"auto":d.height+"px",zIndex:d.zIndex,overflow:"hidden"},b)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":c.modalhead,"aria-hidden":"true"});if("undefined"==typeof d.drag)d.drag=!0;if("undefined"==typeof d.resize)d.resize=!0;if(d.drag)if(a(l).css("cursor","move"),a.fn.jqDrag)a(h).jqDrag(l);
else try{a(h).draggable({handle:a("#"+l.id)})}catch(o){}if(d.resize)if(a.fn.jqResize)a(h).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>"),a("#"+c.themodal).jqResize(".jqResize",c.scrollelm?"#"+c.scrollelm:!1);else try{a(h).resizable({handles:"se, sw",alsoResize:c.scrollelm?"#"+c.scrollelm:!1})}catch(t){}!0===d.closeOnEscape&&a(h).keydown(function(b){27==b.which&&(b=a("#"+c.themodal).data("onClose")||d.onClose,
k.hideModal(this,{gb:d.gbox,jqm:d.jqModal,onClose:b}))})},viewModal:function(c,b){b=a.extend({toTop:!0,overlay:10,modal:!1,onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:!0,jqM:!0},b||{});if(a.fn.jqm&&!0===b.jqm)b.jqM?a(c).attr("aria-hidden","false").jqm(b).jqmShow():a(c).attr("aria-hidden","false").jqmShow();else{""!==b.gbox&&(a(".jqgrid-overlay:first",b.gbox).show(),a(c).data("gbox",b.gbox));a(c).show().attr("aria-hidden","false");try{a(":input:visible",c)[0].focus()}catch(d){}}},info_dialog:function(c,
b,d,f){var e={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,caption:"<b>"+c+"</b>",left:250,top:170,zIndex:1E3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};a.extend(e,f||{});var g=e.jqModal,i=this;a.fn.jqm&&!g&&(g=!1);c="";if(0<e.buttons.length)for(f=0;f<e.buttons.length;f++){if("undefined"==typeof e.buttons[f].id)e.buttons[f].id="info_button_"+f;c+="<a href='javascript:void(0)' id='"+e.buttons[f].id+"' class='fm-button ui-state-default ui-corner-all'>"+
e.buttons[f].text+"</a>"}f=isNaN(e.dataheight)?e.dataheight:e.dataheight+"px";b="<div id='info_id'>"+("<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+f+";"+("text-align:"+e.align+";")+"'>"+b+"</div>");b+=d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+e.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+
d+"</a>"+c+"</div>":""!==c?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+e.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+c+"</div>":"";b+="</div>";try{"false"==a("#info_dialog").attr("aria-hidden")&&this.hideModal("#info_dialog",{jqm:g}),a("#info_dialog").remove()}catch(h){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},b,e,"","",!0);c&&a.each(e.buttons,
function(b){a("#"+this.id,"#info_id").bind("click",function(){e.buttons[b].onClick.call(a("#info_dialog"));return!1})});a("#closedialog","#info_id").click(function(){i.hideModal("#info_dialog",{jqm:g});return!1});a(".fm-button","#info_dialog").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.isFunction(e.beforeOpen)&&e.beforeOpen();this.viewModal("#info_dialog",{onHide:function(a){a.w.hide().remove();a.o&&a.o.remove()},modal:e.modal,jqm:g});
a.isFunction(e.afterOpen)&&e.afterOpen();try{a("#info_dialog").focus()}catch(j){}},createEl:function(c,b,d,f,e){function g(b,c){a.isFunction(c.dataInit)&&c.dataInit(b);c.dataEvents&&a.each(c.dataEvents,function(){void 0!==this.data?a(b).bind(this.type,this.data,this.fn):a(b).bind(this.type,this.fn)});return c}function i(b,c,d){var f="dataInit,dataEvents,dataUrl,buildSelect,sopt,searchhidden,defaultValue,attr".split(",");"undefined"!=typeof d&&a.isArray(d)&&(f=a.extend(f,d));a.each(c,function(c,d){-1===
a.inArray(c,f)&&a(b).attr(c,d)});c.hasOwnProperty("id")||a(b).attr("id",a.jgrid.randId())}var h="";switch(c){case "textarea":h=document.createElement("textarea");if(f)b.cols||a(h).css({width:"98%"});else if(!b.cols)b.cols=20;if(!b.rows)b.rows=2;if("&nbsp;"==d||"&#160;"==d||1==d.length&&160==d.charCodeAt(0))d="";h.value=d;i(h,b);b=g(h,b);a(h).attr({role:"textbox",multiline:"true"});break;case "checkbox":h=document.createElement("input");h.type="checkbox";if(b.value){c=b.value.split(":");if(d===c[0])h.checked=
!0,h.defaultChecked=!0;h.value=c[0];a(h).attr("offval",c[1])}else c=d.toLowerCase(),0>c.search(/(false|0|no|off|undefined)/i)&&""!==c?(h.checked=!0,h.defaultChecked=!0,h.value=d):h.value="on",a(h).attr("offval","off");i(h,b,["value"]);b=g(h,b);a(h).attr("role","checkbox");break;case "select":h=document.createElement("select");h.setAttribute("role","select");f=[];!0===b.multiple?(c=!0,h.multiple="multiple",a(h).attr("aria-multiselectable","true")):c=!1;if("undefined"!=typeof b.dataUrl)a.ajax(a.extend({url:b.dataUrl,
type:"GET",dataType:"html",context:{elem:h,options:b,vl:d},success:function(b){var c=[],d=this.elem,f=this.vl,e=a.extend({},this.options),h=!0===e.multiple;"undefined"!=typeof e.buildSelect&&(b=e.buildSelect(b));if(b=a(b).html()){a(d).append(b);i(d,e);e=g(d,e);if("undefined"===typeof e.size)e.size=h?3:1;h?(c=f.split(","),c=a.map(c,function(b){return a.trim(b)})):c[0]=a.trim(f);setTimeout(function(){a("option",d).each(function(){a(this).attr("role","option");if(-1<a.inArray(a.trim(a(this).text()),
c)||-1<a.inArray(a.trim(a(this).val()),c))this.selected="selected"})},0)}}},e||{}));else if(b.value){var j;if(c){if(f=d.split(","),f=a.map(f,function(b){return a.trim(b)}),"undefined"===typeof b.size)b.size=3}else b.size=1;if("function"===typeof b.value)b.value=b.value();var k,l;if("string"===typeof b.value){k=b.value.split(";");for(j=0;j<k.length;j++){l=k[j].split(":");2<l.length&&(l[1]=a.map(l,function(a,b){if(0<b)return a}).join(":"));e=document.createElement("option");e.setAttribute("role","option");
e.value=l[0];e.innerHTML=l[1];if(!c&&(a.trim(l[0])==a.trim(d)||a.trim(l[1])==a.trim(d)))e.selected="selected";if(c&&(-1<a.inArray(a.trim(l[1]),f)||-1<a.inArray(a.trim(l[0]),f)))e.selected="selected";h.appendChild(e)}}else if("object"===typeof b.value)for(j in k=b.value,k)if(k.hasOwnProperty(j)){e=document.createElement("option");e.setAttribute("role","option");e.value=j;e.innerHTML=k[j];if(!c&&(a.trim(j)==a.trim(d)||a.trim(k[j])==a.trim(d)))e.selected="selected";if(c&&(-1<a.inArray(a.trim(k[j]),f)||
-1<a.inArray(a.trim(j),f)))e.selected="selected";h.appendChild(e)}i(h,b,["value"]);b=g(h,b)}break;case "text":case "password":case "button":j="button"==c?"button":"textbox";h=document.createElement("input");h.type=c;h.value=d;i(h,b);b=g(h,b);if("button"!=c)if(f)b.size||a(h).css({width:"98%"});else if(!b.size)b.size=20;a(h).attr("role",j);break;case "image":case "file":h=document.createElement("input");h.type=c;i(h,b);b=g(h,b);break;case "custom":h=document.createElement("span");try{if(a.isFunction(b.custom_element))if(k=
b.custom_element.call(this,d,b))k=a(k).addClass("customelement").attr({id:b.id,name:b.name}),a(h).empty().append(k);else throw"e2";else throw"e1";}catch(p){"e1"==p&&this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.nodefined,a.jgrid.edit.bClose),"e2"==p?this.info_dialog(a.jgrid.errors.errcap,"function 'custom_element' "+a.jgrid.edit.msg.novalue,a.jgrid.edit.bClose):this.info_dialog(a.jgrid.errors.errcap,"string"===typeof p?p:p.message,a.jgrid.edit.bClose)}}return h},
checkDate:function(a,b){var d={},f,a=a.toLowerCase();f=-1!=a.indexOf("/")?"/":-1!=a.indexOf("-")?"-":-1!=a.indexOf(".")?".":"/";a=a.split(f);b=b.split(f);if(3!=b.length)return!1;f=-1;for(var e,g=-1,i=-1,h=0;h<a.length;h++)e=isNaN(b[h])?0:parseInt(b[h],10),d[a[h]]=e,e=a[h],-1!=e.indexOf("y")&&(f=h),-1!=e.indexOf("m")&&(i=h),-1!=e.indexOf("d")&&(g=h);e="y"==a[f]||"yyyy"==a[f]?4:"yy"==a[f]?2:-1;var h=function(a){for(var b=1;b<=a;b++){this[b]=31;if(4==b||6==b||9==b||11==b)this[b]=30;2==b&&(this[b]=29)}return this}(12),
j;if(-1===f)return!1;j=d[a[f]].toString();2==e&&1==j.length&&(e=1);if(j.length!=e||0===d[a[f]]&&"00"!=b[f]||-1===i)return!1;j=d[a[i]].toString();if(1>j.length||1>d[a[i]]||12<d[a[i]]||-1===g)return!1;j=d[a[g]].toString();return 1>j.length||1>d[a[g]]||31<d[a[g]]||2==d[a[i]]&&d[a[g]]>(0===d[a[f]]%4&&(0!==d[a[f]]%100||0===d[a[f]]%400)?29:28)||d[a[g]]>h[d[a[i]]]?!1:!0},isEmpty:function(a){return a.match(/^\s+$/)||""===a?!0:!1},checkTime:function(a){var b=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(a))if(a=
a.match(b)){if(a[3]){if(1>a[1]||12<a[1])return!1}else if(23<a[1])return!1;if(59<a[2])return!1}else return!1;return!0},checkValues:function(c,b,d,f,e){var g,i;if("undefined"===typeof f)if("string"==typeof b)for(f=0,e=d.p.colModel.length;f<e;f++){if(d.p.colModel[f].name==b){g=d.p.colModel[f].editrules;b=f;try{i=d.p.colModel[f].formoptions.label}catch(h){}break}}else{if(0<=b)g=d.p.colModel[b].editrules}else g=f,i=void 0===e?"_":e;if(g){i||(i=d.p.colNames[b]);if(!0===g.required&&this.isEmpty(c))return[!1,
i+": "+a.jgrid.edit.msg.required,""];f=!1===g.required?!1:!0;if(!0===g.number&&!(!1===f&&this.isEmpty(c))&&isNaN(c))return[!1,i+": "+a.jgrid.edit.msg.number,""];if("undefined"!=typeof g.minValue&&!isNaN(g.minValue)&&parseFloat(c)<parseFloat(g.minValue))return[!1,i+": "+a.jgrid.edit.msg.minValue+" "+g.minValue,""];if("undefined"!=typeof g.maxValue&&!isNaN(g.maxValue)&&parseFloat(c)>parseFloat(g.maxValue))return[!1,i+": "+a.jgrid.edit.msg.maxValue+" "+g.maxValue,""];if(!0===g.email&&!(!1===f&&this.isEmpty(c))&&
(e=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
!e.test(c)))return[!1,i+": "+a.jgrid.edit.msg.email,""];if(!0===g.integer&&!(!1===f&&this.isEmpty(c))&&(isNaN(c)||0!==c%1||-1!=c.indexOf(".")))return[!1,i+": "+a.jgrid.edit.msg.integer,""];if(!0===g.date&&!(!1===f&&this.isEmpty(c))&&(b=d.p.colModel[b].formatoptions&&d.p.colModel[b].formatoptions.newformat?d.p.colModel[b].formatoptions.newformat:d.p.colModel[b].datefmt||"Y-m-d",!this.checkDate(b,c)))return[!1,i+": "+a.jgrid.edit.msg.date+" - "+b,""];if(!0===g.time&&!(!1===f&&this.isEmpty(c))&&!this.checkTime(c))return[!1,
i+": "+a.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(!0===g.url&&!(!1===f&&this.isEmpty(c))&&(e=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,!e.test(c)))return[!1,i+": "+a.jgrid.edit.msg.url,""];if(!0===g.custom&&!(!1===f&&this.isEmpty(c)))return a.isFunction(g.custom_func)?(c=g.custom_func.call(d,c,i),a.isArray(c)?c:[!1,a.jgrid.edit.msg.customarray,""]):[!1,a.jgrid.edit.msg.customfcheck,""]}return[!0,"",""]}})})(jQuery);
(function(a){a.fn.jqFilter=function(c){if("string"===typeof c){var b=a.fn.jqFilter[c];if(!b)throw"jqFilter - No such method: "+c;var d=a.makeArray(arguments).slice(1);return b.apply(this,d)}var f=a.extend(!0,{filter:null,columns:[],onChange:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",
operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",
description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:"eq,ne,lt,le,gt,ge,nu,nn,in,ni".split(","),stropts:"eq,ne,bw,bn,ew,en,cn,nc,nu,nn,in,ni".split(","),_gridsopt:[],groupOps:["AND","OR"],groupButton:!0},c||{});return this.each(function(){if(!this.filter){this.p=f;if(null===this.p.filter||void 0===this.p.filter)this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]};var b,
d=this.p.columns.length,c,h=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(b=0;b<this.p._gridsopt.length;b++)this.p.ops[b].description=this.p._gridsopt[b];this.p.initFilter=a.extend(!0,{},this.p.filter);if(d){for(b=0;b<d;b++){c=this.p.columns[b];if(c.stype)c.inputtype=c.stype;else if(!c.inputtype)c.inputtype="text";if(c.sorttype)c.searchtype=c.sorttype;else if(!c.searchtype)c.searchtype="string";if(void 0===c.hidden)c.hidden=!1;if(!c.label)c.label=c.name;if(c.index)c.name=
c.index;if(!c.hasOwnProperty("searchoptions"))c.searchoptions={};if(!c.hasOwnProperty("searchrules"))c.searchrules={}}this.p.showQuery&&a(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;'><tbody><tr><td class='query'></td></tr></tbody></table>");var j=function(b,c){var d=[!0,""];if(a.isFunction(c.searchrules))d=c.searchrules(b,c);else if(a.jgrid&&a.jgrid.checkValues)try{d=a.jgrid.checkValues(b,-1,null,c.searchrules,c.label)}catch(e){}if(d&&
d.length&&!1===d[0])f.error=!d[0],f.errmsg=d[1]};this.onchange=function(){this.p.error=!1;this.p.errmsg="";return a.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):!1};this.reDraw=function(){a("table.group:first",this).remove();var b=this.createTableForGroup(f.filter,null);a(this).append(b)};this.createTableForGroup=function(b,c){var d=this,e,g=a("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>");null===c&&a(g).append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='left'></th></tr>");
var h=a("<tr></tr>");a(g).append(h);var i=a("<th colspan='5' align='left'></th>");h.append(i);var j=a("<select class='opsel'></select>");i.append(j);var h="",x;for(e=0;e<f.groupOps.length;e++)x=b.groupOp===d.p.groupOps[e]?" selected='selected'":"",h+="<option value='"+d.p.groupOps[e]+"'"+x+">"+d.p.groupOps[e]+"</option>";j.append(h).bind("change",function(){b.groupOp=a(j).val();d.onchange()});h="<span></span>";this.p.groupButton&&(h=a("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),
h.bind("click",function(){if(void 0===b.groups)b.groups=[];b.groups.push({groupOp:f.groupOps[0],rules:[],groups:[]});d.reDraw();d.onchange();return!1}));i.append(h);var h=a("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>"),D;h.bind("click",function(){if(void 0===b.rules)b.rules=[];for(e=0;e<d.p.columns.length;e++){var a="undefined"===typeof d.p.columns[e].search?!0:d.p.columns[e].search,c=!0===d.p.columns[e].hidden;if(!0===d.p.columns[e].searchoptions.searchhidden&&a||a&&
!c){D=d.p.columns[e];break}}b.rules.push({field:D.name,op:(D.searchoptions.sopt?D.searchoptions.sopt:d.p.sopt?d.p.sopt:"string"===D.searchtype?d.p.stropts:d.p.numopts)[0],data:""});d.reDraw();return!1});i.append(h);null!==c&&(h=a("<input type='button' value='-' title='Delete group' class='delete-group'/>"),i.append(h),h.bind("click",function(){for(e=0;e<c.groups.length;e++)if(c.groups[e]===b){c.groups.splice(e,1);break}d.reDraw();d.onchange();return!1}));if(void 0!==b.groups)for(e=0;e<b.groups.length;e++)i=
a("<tr></tr>"),g.append(i),h=a("<td class='first'></td>"),i.append(h),h=a("<td colspan='4'></td>"),h.append(this.createTableForGroup(b.groups[e],b)),i.append(h);if(void 0===b.groupOp)b.groupOp=d.p.groupOps[0];if(void 0!==b.rules)for(e=0;e<b.rules.length;e++)g.append(this.createTableRowForRule(b.rules[e],b));return g};this.createTableRowForRule=function(b,d){var c=this,e=a("<tr></tr>"),g,i,j,n,x="",D;e.append("<td class='first'></td>");var F=a("<td class='columns'></td>");e.append(F);var ha=a("<select></select>"),
N,W=[];F.append(ha);ha.bind("change",function(){b.field=a(ha).val();j=a(this).parents("tr:first");for(g=0;g<c.p.columns.length;g++)if(c.p.columns[g].name===b.field){n=c.p.columns[g];break}if(n){n.searchoptions.id=a.jgrid.randId();if(h&&"text"===n.inputtype&&!n.searchoptions.size)n.searchoptions.size=10;var d=a.jgrid.createEl(n.inputtype,n.searchoptions,"",!0,c.p.ajaxSelectOptions,!0);a(d).addClass("input-elm");i=n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:"string"===n.searchtype?c.p.stropts:
c.p.numopts;var e="",f="";W=[];a.each(c.p.ops,function(){W.push(this.name)});for(g=0;g<i.length;g++)if(N=a.inArray(i[g],W),-1!==N){f="";if(0===g)b.op=c.p.ops[N].name,f=" selected='selected'";e+="<option value='"+c.p.ops[N].name+"'"+f+">"+c.p.ops[N].description+"</option>"}a(".selectopts",j).empty().append(e);a(".data",j).empty().append(d);a(".input-elm",j).bind("change",function(){b.data=a(this).val();c.onchange()});setTimeout(function(){b.data=a(d).val();c.onchange()},0)}});for(g=F=0;g<c.p.columns.length;g++){D=
"undefined"===typeof c.p.columns[g].search?!0:c.p.columns[g].search;var ya=!0===c.p.columns[g].hidden;if(!0===c.p.columns[g].searchoptions.searchhidden&&D||D&&!ya)D="",b.field===c.p.columns[g].name&&(D=" selected='selected'",F=g),x+="<option value='"+c.p.columns[g].name+"'"+D+">"+c.p.columns[g].label+"</option>"}ha.append(x);x=a("<td class='operators'></td>");e.append(x);n=f.columns[F];n.searchoptions.id=a.jgrid.randId();if(h&&"text"===n.inputtype&&!n.searchoptions.size)n.searchoptions.size=10;var F=
a.jgrid.createEl(n.inputtype,n.searchoptions,b.data,!0,c.p.ajaxSelectOptions,!0),Y=a("<select class='selectopts'></select>");x.append(Y);Y.bind("change",function(){b.op=a(Y).val();j=a(this).parents("tr:first");var d=a(".input-elm",j)[0];"nu"===b.op||"nn"===b.op?(b.data="",d.value="",d.setAttribute("readonly","true"),d.setAttribute("disabled","true")):(d.removeAttribute("readonly"),d.removeAttribute("disabled"));c.onchange()});i=n.searchoptions.sopt?n.searchoptions.sopt:c.p.sopt?c.p.sopt:"string"===
n.searchtype?f.stropts:c.p.numopts;x="";a.each(c.p.ops,function(){W.push(this.name)});for(g=0;g<i.length;g++)N=a.inArray(i[g],W),-1!==N&&(D=b.op===c.p.ops[N].name?" selected='selected'":"",x+="<option value='"+c.p.ops[N].name+"'"+D+">"+c.p.ops[N].description+"</option>");Y.append(x);x=a("<td class='data'></td>");e.append(x);x.append(F);a(F).addClass("input-elm").bind("change",function(){b.data=a(this).val();c.onchange()});x=a("<td></td>");e.append(x);F=a("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");
x.append(F);F.bind("click",function(){for(g=0;g<d.rules.length;g++)if(d.rules[g]===b){d.rules.splice(g,1);break}c.reDraw();c.onchange();return!1});return e};this.getStringForGroup=function(a){var b="(",c;if(void 0!==a.groups)for(c=0;c<a.groups.length;c++){1<b.length&&(b+=" "+a.groupOp+" ");try{b+=this.getStringForGroup(a.groups[c])}catch(d){alert(d)}}if(void 0!==a.rules)try{for(c=0;c<a.rules.length;c++)1<b.length&&(b+=" "+a.groupOp+" "),b+=this.getStringForRule(a.rules[c])}catch(e){alert(e)}b+=")";
return"()"===b?"":b};this.getStringForRule=function(b){var c="",d="",e,g;for(e=0;e<this.p.ops.length;e++)if(this.p.ops[e].name===b.op){c=this.p.ops[e].operator;d=this.p.ops[e].name;break}for(e=0;e<this.p.columns.length;e++)if(this.p.columns[e].name===b.field){g=this.p.columns[e];break}e=b.data;if("bw"===d||"bn"===d)e+="%";if("ew"===d||"en"===d)e="%"+e;if("cn"===d||"nc"===d)e="%"+e+"%";if("in"===d||"ni"===d)e=" ("+e+")";f.errorcheck&&j(b.data,g);return-1!==a.inArray(g.searchtype,["int","integer","float",
"number","currency"])||"nn"===d||"nu"===d?b.field+" "+c+" "+e:b.field+" "+c+' "'+e+'"'};this.resetFilter=function(){this.p.filter=a.extend(!0,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){a("th.ui-state-error",this).html("");a("tr.error",this).hide()};this.showError=function(){a("th.ui-state-error",this).html(this.p.errmsg);a("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(f.filter)};this.toString=function(){function a(c){var d=
"(",e;if(void 0!==c.groups)for(e=0;e<c.groups.length;e++)1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && "),d+=a(c.groups[e]);if(void 0!==c.rules)for(e=0;e<c.rules.length;e++){1<d.length&&(d="OR"===c.groupOp?d+" || ":d+" && ");var f=c.rules[e];if(b.p.errorcheck){for(var g=void 0,h=void 0,g=0;g<b.p.columns.length;g++)if(b.p.columns[g].name===f.field){h=b.p.columns[g];break}h&&j(f.data,h)}d+=f.op+"(item."+f.field+",'"+f.data+"')"}d+=")";return"()"===d?"":d}var b=this;return a(this.p.filter)};this.reDraw();
if(this.p.showQuery)this.onchange();this.filter=!0}}})};a.extend(a.fn.jqFilter,{toSQLString:function(){var a="";this.each(function(){a=this.toUserFriendlyString()});return a},filterData:function(){var a;this.each(function(){a=this.p.filter});return a},getParameter:function(a){return void 0!==a&&this.p.hasOwnProperty(a)?this.p[a]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(a){"string"===typeof a&&(a=jQuery.jgrid.parse(a));this.each(function(){this.p.filter=
a;this.reDraw();this.onchange()})}})})(jQuery);
var xmlJsonClass={xml2json:function(a,c){if(9===a.nodeType)a=a.documentElement;var b=this.toJson(this.toObj(this.removeWhite(a)),a.nodeName,"\t");return"{\n"+c+(c?b.replace(/\t/g,c):b.replace(/\t|\n/g,""))+"\n}"},json2xml:function(a,c){var b=function(a,d,c){var f="",j,k;if(a instanceof Array)if(0===a.length)f+=c+"<"+d+">__EMPTY_ARRAY_</"+d+">\n";else for(j=0,k=a.length;j<k;j+=1)var l=c+b(a[j],d,c+"\t")+"\n",f=f+l;else if("object"===typeof a){j=!1;f+=c+"<"+d;for(k in a)a.hasOwnProperty(k)&&("@"===
k.charAt(0)?f+=" "+k.substr(1)+'="'+a[k].toString()+'"':j=!0);f+=j?">":"/>";if(j){for(k in a)a.hasOwnProperty(k)&&("#text"===k?f+=a[k]:"#cdata"===k?f+="<![CDATA["+a[k]+"]]\>":"@"!==k.charAt(0)&&(f+=b(a[k],k,c+"\t")));f+=("\n"===f.charAt(f.length-1)?c:"")+"</"+d+">"}}else f="function"===typeof a?f+(c+"<"+d+"><![CDATA["+a+"]]\></"+d+">"):'""'===a.toString()||0===a.toString().length?f+(c+"<"+d+">__EMPTY_STRING_</"+d+">"):f+(c+"<"+d+">"+a.toString()+"</"+d+">");return f},d="",f;for(f in a)a.hasOwnProperty(f)&&
(d+=b(a[f],f,""));return c?d.replace(/\t/g,c):d.replace(/\t|\n/g,"")},toObj:function(a){var c={},b=/function/i;if(1===a.nodeType){if(a.attributes.length){var d;for(d=0;d<a.attributes.length;d+=1)c["@"+a.attributes[d].nodeName]=(a.attributes[d].nodeValue||"").toString()}if(a.firstChild){var f=d=0,e=!1,g;for(g=a.firstChild;g;g=g.nextSibling)1===g.nodeType?e=!0:3===g.nodeType&&g.nodeValue.match(/[^ \f\n\r\t\v]/)?d+=1:4===g.nodeType&&(f+=1);if(e)if(2>d&&2>f){this.removeWhite(a);for(g=a.firstChild;g;g=
g.nextSibling)3===g.nodeType?c["#text"]=this.escape(g.nodeValue):4===g.nodeType?b.test(g.nodeValue)?c[g.nodeName]=[c[g.nodeName],g.nodeValue]:c["#cdata"]=this.escape(g.nodeValue):c[g.nodeName]?c[g.nodeName]instanceof Array?c[g.nodeName][c[g.nodeName].length]=this.toObj(g):c[g.nodeName]=[c[g.nodeName],this.toObj(g)]:c[g.nodeName]=this.toObj(g)}else a.attributes.length?c["#text"]=this.escape(this.innerXml(a)):c=this.escape(this.innerXml(a));else if(d)a.attributes.length?c["#text"]=this.escape(this.innerXml(a)):
(c=this.escape(this.innerXml(a)),"__EMPTY_ARRAY_"===c?c="[]":"__EMPTY_STRING_"===c&&(c=""));else if(f)if(1<f)c=this.escape(this.innerXml(a));else for(g=a.firstChild;g;g=g.nextSibling)if(b.test(a.firstChild.nodeValue)){c=a.firstChild.nodeValue;break}else c["#cdata"]=this.escape(g.nodeValue)}!a.attributes.length&&!a.firstChild&&(c=null)}else 9===a.nodeType?c=this.toObj(a.documentElement):alert("unhandled node type: "+a.nodeType);return c},toJson:function(a,c,b,d){void 0===d&&(d=!0);var f=c?'"'+c+'"':
"",e="\t",g="\n";d||(g=e="");if("[]"===a)f+=c?":[]":"[]";else if(a instanceof Array){var i,h,j=[];for(h=0,i=a.length;h<i;h+=1)j[h]=this.toJson(a[h],"",b+e,d);f+=(c?":[":"[")+(1<j.length?g+b+e+j.join(","+g+b+e)+g+b:j.join(""))+"]"}else if(null===a)f+=(c&&":")+"null";else if("object"===typeof a){i=[];for(h in a)a.hasOwnProperty(h)&&(i[i.length]=this.toJson(a[h],h,b+e,d));f+=(c?":{":"{")+(1<i.length?g+b+e+i.join(","+g+b+e)+g+b:i.join(""))+"}"}else f="string"===typeof a?f+((c&&":")+'"'+a.replace(/\\/g,
"\\\\").replace(/\"/g,'\\"')+'"'):f+((c&&":")+'"'+a.toString()+'"');return f},innerXml:function(a){var c="";if("innerHTML"in a)c=a.innerHTML;else for(var b=function(a){var c="",e;if(1===a.nodeType){c+="<"+a.nodeName;for(e=0;e<a.attributes.length;e+=1)c+=" "+a.attributes[e].nodeName+'="'+(a.attributes[e].nodeValue||"").toString()+'"';if(a.firstChild){c+=">";for(e=a.firstChild;e;e=e.nextSibling)c+=b(e);c+="</"+a.nodeName+">"}else c+="/>"}else 3===a.nodeType?c+=a.nodeValue:4===a.nodeType&&(c+="<![CDATA["+
a.nodeValue+"]]\>");return c},a=a.firstChild;a;a=a.nextSibling)c+=b(a);return c},escape:function(a){return a.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(a){a.normalize();var c;for(c=a.firstChild;c;)if(3===c.nodeType)if(c.nodeValue.match(/[^ \f\n\r\t\v]/))c=c.nextSibling;else{var b=c.nextSibling;a.removeChild(c);c=b}else 1===c.nodeType&&this.removeWhite(c),c=c.nextSibling;return a}};
(function(a){a.jqschedule={calendarid:"#calendar",eventid:"#event",calendarurl:"",locales:{dateFormat:"dd/MM/yyyy",bSave:"Save",bAdd:"Add",bDelete:"Delete",bCancel:"Cancel",bChange:"Change",bClose:"Close",bSearch:"Find",editCaption:"Edit event",addCaption:"Add new event",userCaption:"Change Calendar",searchCaption:"Advanced search"},searchCols:[],searchOpers:[],gotoDayEventView:function(c){a("#b_search_cal").trigger("click");c=a.fullCalendar.parseDate(parseInt(c,10));a(a.jqschedule.calendarid).fullCalendar("gotoDate",
c.getFullYear(),c.getMonth(),c.getDate());a(a.jqschedule.calendarid).fullCalendar("changeView","agendaDay")},eventEditDialog:function(c){var b=a(a.jqschedule.eventid);a("input,textarea,select",b).val("");c.allDay?a("#endtime, #starttime",b).hide():a("#endtime, #starttime",b).show();a("#all_day",b).attr("checked",c.allDay);a("#title",b).val(c.title);setTimeout(function(){a("#description",b).val(c.description)},100);a("#location",b).val(c.location);a("#categories",b).val(c.className);a("#access",b).val(c.access);
a("#start",b).val(a.fullCalendar.formatDate(c.start,a.jqschedule.locales.dateFormat));a("#starttime",b).val(a.fullCalendar.formatDate(c.start,"HH:mm"));a("#end",b).val(a.fullCalendar.formatDate(c.end?c.end:c.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(c.end?c.end:c.start,"HH:mm"));a("#user_id",b).val(c.user_id);var d={},f=a("#start",b).datepicker("option","dateFormat"),e;d[a.jqschedule.locales.bSave]=function(){var d=a.datepicker.parseDate(f,a("#start",b).val()),
i=a("#starttime",b).val(),i=i?i.split(":"):["0","0"];d.setHours(parseInt(i[0],10),parseInt(i[1],10));(i=a.datepicker.parseDate(f,a("#end",b).val()))||(i=a.datepicker.parseDate(f,a("#start",b).val()));var h=a("#endtime",b).val(),h=h?h.split(":"):["0","0"];i.setHours(parseInt(h[0],10),parseInt(h[1],10));0>i.getTime()-d.getTime()?alert("End time is little than start time"):(c.start=d,c._start=d,c.end=i,c._end=i,c.allDay=a("#all_day",b).attr("checked")?!0:!1,c.title=a("#title",b).val(),""==a.trim(c.title)?
alert("Title is required"):(c.description=a("#description",b).val(),c.location=a("#location",b).val(),c.className=a("#categories",b).val(),c.access=a("#access",b).val(),c.user_id=a("#user_id",b).val(),e={},e.event_id=c.id,e.start=c.start.getTime()/1E3,e.end=c.end.getTime()/1E3,e.title=c.title,e.description=c.description,e.location=c.location,e.categories=a("#categories",b).val(),e.access=c.access,e.user_id=c.user_id,e.all_day=c.allDay?1:0,e.oper="editEvent",a.ajax({url:a.jqschedule.calendarurl,data:e,
dataType:"json",type:"post",success:function(){a(a.jqschedule.calendarid).fullCalendar("updateEvent",c);b.dialog("close")}})))};d[a.jqschedule.locales.bDelete]=function(){e={};e.event_id=c.id;e.oper="removeEvent";a.ajax({url:a.jqschedule.calendarurl,data:e,dataType:"json",type:"post"});a(a.jqschedule.calendarid).fullCalendar("removeEvents",c.id);b.dialog("close")};d[a.jqschedule.locales.bCancel]=function(){b.dialog("close")};b.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",
of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){b.dialog("destroy");b.hide();b=null},buttons:d}).show();a(".ui-dialog").css("font-size","12px");return!1},eventViewDialog:function(c){var b=a(a.jqschedule.eventid);a("input,textarea,select",b).val("");c.allDay?a("#endtime, #starttime",b).hide():a("#endtime, #starttime",b).show();a("#all_day",b).attr("checked",c.allDay);a("#title",b).val(c.title);setTimeout(function(){a("#description",b).val(c.description)},100);a("#location",
b).val(c.location);a("#categories",b).val(c.className);a("#access",b).val(c.access);a("#start",b).val(a.fullCalendar.formatDate(c.start,a.jqschedule.locales.dateFormat));a("#starttime",b).val(a.fullCalendar.formatDate(c.start,"HH:mm"));a("#end",b).val(a.fullCalendar.formatDate(c.end?c.end:c.start,a.jqschedule.locales.dateFormat));a("#endtime").val(a.fullCalendar.formatDate(c.end?c.end:c.start,"HH:mm"));a("#user_id",b).val(c.user_id);var d={};d[a.jqschedule.locales.bClose]=function(){b.dialog("close")};
b.dialog({modal:!0,width:490,closeOnEscape:!1,position:{at:"center bottom",of:a.jqschedule.calendarid},title:a.jqschedule.locales.editCaption,close:function(){b.dialog("destroy");b.hide();b=null},buttons:d}).show();a(".ui-dialog").css("font-size","12px");return!1},eventAddDialog:function(c,b){var d=a(a.jqschedule.eventid);a("input,textarea,select",d).val("");b?a("#endtime, #starttime",d).hide():a("#endtime, #starttime",d).show();a("#all_day",d).attr("checked",b);setTimeout(function(){a("#description",
d).val("")},100);a("#start",d).val(a.fullCalendar.formatDate(c,a.jqschedule.locales.dateFormat));a("#starttime",d).val(a.fullCalendar.formatDate(c,"HH:mm"));a("#end",d).val(a.fullCalendar.formatDate(c,a.jqschedule.locales.dateFormat));a("#endtime",d).val(a.fullCalendar.formatDate(c,"HH:mm"));var f=a("#switchuser").val();a.isArray(f)&&(f=f[0]);a("#user_id",d).val(f);var f={},e=a("#start",d).datepicker("option","dateFormat"),g,i;f[a.jqschedule.locales.bAdd]=function(){i={};var b=a.datepicker.parseDate(e,
a("#start",d).val()),c=a("#starttime",d).val(),c=c?c.split(":"):["0","0"];b.setHours(parseInt(c[0],10),parseInt(c[1],10));(c=a.datepicker.parseDate(e,a("#end",d).val()))||(c=a.datepicker.parseDate(e,a("#start",d).val()));var f=a("#endtime").val(),f=f?f.split(":"):["0","0"];c.setHours(parseInt(f[0],10),parseInt(f[1],10));0>c.getTime()-b.getTime()?alert("End time is little than start time"):(i.start=b,i._start=b,i.end=c,i._end=c,i.allDay=a("#all_day",d).attr("checked")?!0:!1,i.title=a("#title",d).val(),
""==a.trim(i.title)?alert("Title is required"):(i.description=a("#description",d).val(),i.location=a("#location",d).val(),i.className=a("#categories",d).val(),i.access=a("#access",d).val(),i.user_id=a("#user_id",d).val(),g={},g.start=i.start.getTime()/1E3,g.end=i.end.getTime()/1E3,g.title=i.title,g.description=i.description,g.location=i.location,g.categories=a("#categories",d).val(),g.access=i.access,g.user_id=i.user_id,g.all_day=i.allDay?1:0,g.oper="newEvent",a.ajax({url:a.jqschedule.calendarurl,
data:g,dataType:"json",type:"POST",success:function(b){if(b.event_id)i.id=b.event_id,i._id=b.event_id,a(a.jqschedule.calendarid).fullCalendar("renderEvent",i,!1),d.dialog("close")}})))};f[a.jqschedule.locales.bCancel]=function(){d.dialog("close")};d.dialog({modal:!0,width:490,position:{at:"center bottom",of:a.jqschedule.calendarid},closeOnEscape:!1,title:a.jqschedule.locales.addCaption,close:function(){d.dialog("destroy");d.hide();d=null},buttons:f}).show();a(".ui-dialog").css("font-size","12px")},
eventLoading:function(c){if(c){var c=a(".calwrapper").width(),b=a(".calwrapper").height()+10;a("body").append('<div class="ui-widget-overlay" style="width:'+c+"px;height:"+b+'px;z-index: 1001;"></div>');a("#progresspar").show()}else a(".ui-widget-overlay").remove(),a("#progresspar").hide()},eventDrop:function(c,b,d,f){if(null==c.end)c.end=c.start;a.ajax({url:a.jqschedule.calendarurl,data:{oper:"moveEvent",event_id:c.id,start:c.start.getTime()/1E3,end:c.end.getTime()/1E3,all_day:f?1:0},dataType:"json",
type:"post"})},eventResize:function(c){a.ajax({url:a.jqschedule.calendarurl,data:{oper:"resizeEvent",event_id:c.id,start:c.start.getTime()/1E3,end:c.end.getTime()/1E3},dataType:"json",type:"post"})},eventRender:function(a,b){try{a.description&&b.tooltip({position:{my:"left bottom",at:"center top",offset:"-30 -10",of:b},content:function(){return a.description}})}catch(d){}},changeCalendarUser:function(){var c=a("#caluser");c.dialog({modal:!0,width:400,title:a.jqschedule.locales.userCaption,close:function(){c.dialog("destroy");
c.hide();c=null},buttons:[{text:a.jqschedule.locales.bChange,click:function(){var b=a("#switchuser",this).val();a.ajax({url:a.jqschedule.calendarurl,data:{_user_id:b,oper:"switchUser"},dataType:"json",type:"post",success:function(){a(a.jqschedule.calendarid).fullCalendar("refetchEvents");a("#common_search").val("");a(".fnd-results").html("");a("#search_table").empty();var b=a("#switchuser option:selected");if(1>=b.length)a("#cal_user").html("<li>"+b.text()+"</li>");else{var c="";a.each(b,function(){c+=
"<li>"+a(this).text()+"</li>"});a("#cal_user").html(c)}}});c.dialog("close")}},{text:a.jqschedule.locales.bCancel,click:function(){c.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px");return!1},printEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var c=a("#common_search").val(),b="simple";if(""==c){var b="complex",d=a("#search_cal");if(d){d=d.jqFilter("filterData");if(!d.rules.length)return!1;try{c=xmlJsonClass.toJson(d,"","",!1)}catch(f){try{c=
JSON.stringify(d)}catch(e){}}}}window.location=a.jqschedule.calendarurl+"?oper=printEvents&stype="+b+"&search=true&svalue="+c}else b=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),c=b.start.getTime()/1E3,b=b.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=printEvents&start="+c+"&end="+b;return!1},exportEvents:function(){if(a("#b_search_cal").hasClass("ui-state-active")){var c=a("#common_search").val(),b="simple";if(""==c){var b="complex",d=a("#search_cal");if(d){d=d.jqFilter("filterData");
if(!d.rules.length)return!1;try{c=xmlJsonClass.toJson(d,"","",!1)}catch(f){try{c=JSON.stringify(d)}catch(e){}}}}window.location=a.jqschedule.calendarurl+"?oper=exportEvents&stype="+b+"&search=true&svalue="+c}else b=jQuery(a.jqschedule.calendarid).fullCalendar("getView"),c=b.start.getTime()/1E3,b=b.end.getTime()/1E3,window.location=a.jqschedule.calendarurl+"?oper=exportEvents&start="+c+"&end="+b;return!1},showSearch:function(){a("#common_search").val()&&(a("#common_search").val(""),a("#b_common_search").trigger("click"));
a(this).addClass("ui-state-active");a(".fc-view-agendaWeek, .fc-view-agendaDay, .fc-view-basicDay, .fc-view-basickWeek, .fc-view-month, .fc-view-year").hide();a(".fc-view-search").show();a("#common_search").focus()},hideSearch:function(){a(this).removeClass("ui-state-active");var c=a(a.jqschedule.calendarid).fullCalendar("getView").name;a(".fc-view-search").hide();a(".fc-view-"+c).show()},_filSearchTable:function(c,b){a(b).empty();if(c&&c.length){a(".fnd-results").html(c.length);var d="";a.each(c,
function(){var b=a.fullCalendar.parseDate(this.start),c=a.fullCalendar.parseDate(this.end),g=a.fullCalendar.formatDate(b,"HH:mm"),i=a.fullCalendar.formatDate(c,"HH:mm"),g=this.allDay?"all day":g+" - "+i,b=a.fullCalendar.formatDate(b,"ddd  dd MMM yyyy"),c=a.fullCalendar.formatDate(c,"ddd  dd MMM yyyy");b!=c&&(g+=" "+c);d+="<tr id='"+this.id+"'><th class='ui-event-cell ui-widget-content'><a href=\"javascript:jQuery.jqschedule.gotoDayEventView('"+this.start+"');\">"+b+"</a></th><td class='ui-event-time ui-widget-content'>"+
g+"</td><td class='ui-event-title ui-widget-content'><a href=\"javascript:jQuery.jqschedule.editFromSearch('"+this.id+"');\" class='' style='border: 0px none;text-decoration:  underline;'>"+this.title+"</a></td>";d+="<td class='source' style='display:none;'>";d+=this.id+"~`"+this.title+"~`"+this.start+"~`"+this.end+"~`"+this.description+"~`"+this.location+"~`"+this.className+"~`"+this.access+"~`"+this.allDay+"~`"+this.user_id;d+="</td>";d+="</tr>"});a(b).append(d)}},doSimpleSearch:function(){var c=
a("#common_search").val();c?a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,stype:"simple",svalue:c,oper:"getEvent"},dataType:"json",type:"POST",success:function(b){a.jqschedule._filSearchTable(b,"#search_table")}}):(a(".fnd-results").html(""),a("#search_table").empty())},buildLocalSearch:function(){var c,b;a("label",a.jqschedule.eventid).each(function(d){c={};c.name=a(this).attr("for");c.label=a(this).html();"categories"==c.name||"access"==c.name?(c.inputtype="select",b={},a("#"+c.name+" option",
a.jqschedule.eventid).each(function(){b[a(this).val()]=a(this).text()}),c.searchoptions={value:b}):"all_day"==c.name?(c.inputtype="select",b={1:"Yes","0":"No"},c.searchoptions={value:b}):"start"==c.name||"end"==c.name?(c.searchtype="date",c.searchoptions={size:20,sopt:["eq","gt","ge","lt","le"],dataInit:function(b){a(b).datetimepicker()}}):c.searchoptions={size:20};a.jqschedule.searchCols[d]=c})},advancedSearchDlg:function(){a("#search_cal").jqFilter({columns:a.jqschedule.searchCols,filter:{groupOp:"AND",
rules:[{field:a.jqschedule.searchCols[0].name,op:"eq",data:""}]},_gridsopt:a.jqschedule.searchOpers});a("#search_cal").dialog({modal:!0,width:"auto",autoOpen:!1,title:a.jqschedule.locales.searchCaption,close:function(){},buttons:[{text:a.jqschedule.locales.bSearch,click:function(){var c=a("#search_cal"),b,d=c.jqFilter("filterData");if(d.rules.length){try{b=xmlJsonClass.toJson(d,"","",!1)}catch(f){try{b=JSON.stringify(d)}catch(e){}}b&&a.ajax({url:a.jqschedule.calendarurl,data:{search:!0,stype:"complex",
svalue:b,oper:"getEvent"},dataType:"json",type:"POST",success:function(b){a.jqschedule._filSearchTable(b,"#search_table")}});c.dialog("close")}}},{text:a.jqschedule.locales.bClose,click:function(){a("#search_cal").dialog("close")}}]});a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px")},editFromSearch:function(c){var b=a("tr#"+c+" td.source").html().split("~`"),d={};a.each("id,title,start,end,description,location,className,access,allDay,user_id".split(","),function(a){if("start"==this||
"end"==this)b[a]=new Date(1E3*parseFloat(b[a]));"allDay"==this&&(b[a]="1"==b[a]?!0:!1);d[this]=b[a]});a.jqschedule.eventViewDialog(d)},openDaySearchDlg:function(c){var b=c.getTime()/1E3;c.setHours(23);c.setMinutes(23);var d=c.getTime()/1E3,f=a("#day_dialog");f.dialog({modal:!0,width:450,close:function(){f.dialog("destroy");f.hide();f=null},open:function(){a("#day_table").empty();a.ajax({url:a.jqschedule.calendarurl,data:{oper:"getEvent",start:b,end:d},dataType:"json",type:"POST",success:function(b){a.jqschedule._filSearchTable(b,
"#day_table")}})},buttons:[{text:a.jqschedule.locales.bClose,click:function(){f.dialog("close")}}]}).show();a(".ui-dialog, .ui-dialog-buttonpane").css("font-size","12px")},eventsFunc:function(c,b,d){a.ajax({url:a.jqschedule.calendarurl,dataType:"json",type:"POST",data:{oper:"getEvent",start:c.getTime()/1E3,end:b.getTime()/1E3},success:function(a){d(a)}})},processScript:function(){a("#datepicker").datepicker({dateFormat:"yy-mm-dd",onSelect:function(c){c=c.split("-");a(a.jqschedule.calendarid).fullCalendar("gotoDate",
parseInt(c[0],10),parseInt(c[1],10)-1,parseInt(c[2],10))}});a("#start, #end",a.jqschedule.eventid).datepicker();a("#all_day",a.jqschedule.eventid).click(function(){this.checked?a("#endtime, #starttime",a.jqschedule.eventid).val("00:00").hide():a("#endtime, #starttime",a.jqschedule.eventid).show()});a(".custbutton").height(a("table.fc-header").height());a("#b_user_change").click(jQuery.jqschedule.changeCalendarUser);a("#b_export_ical").click(jQuery.jqschedule.exportEvents);a("#b_print_cal").click(jQuery.jqschedule.printEvents);
a(".fc-content",a.jqschedule.calendarid).append(a(".fc-view-search"));a("#b_search_cal").toggle(jQuery.jqschedule.showSearch,jQuery.jqschedule.hideSearch);a("#b_common_search").click(jQuery.jqschedule.doSimpleSearch);a("#b_adv_search").click(function(){a("#search_cal").dialog("open");return!1});a(".jq-button").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")});a.jqschedule.buildLocalSearch();a.jqschedule.advancedSearchDlg()}}})(jQuery);
